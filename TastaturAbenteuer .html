<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title data-translate="title">Schreibabenteuer DemusOpalium</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@700&family=Roboto:wght@400;700&family=Merriweather:wght@400;700&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
  <!-- Animate.css f√ºr Animationen -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <style>
    /* Basis-Reset */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    /* Grundlayout und Themes */
    body {
      font-family: 'Roboto', sans-serif;
      transition: background 0.5s ease, color 0.5s ease;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    /* Vorhandene Themes */
    .theme-dark { background: linear-gradient(135deg, #2c3e50, #4ca1af); color: #f0f0f0; }
    .theme-light { background: #f7f7f7; color: #333; }
    .theme-vintage { background: #f4e8c1; color: #5a4b3b; }
    /* Neue Themes */
    .theme-neon { background: #0f0f0f; color: #39ff14; }
    .theme-pastel { background: #ffe6f0; color: #ff8fa3; }
    .theme-ocean { background: #1e3d59; color: #a2d5f2; }
    .theme-forest { background: #2d4739; color: #cdeac0; }
    .theme-sunset { background: #ff9a8d; color: #4b134f; }
    /* Rahmen f√ºr Buttons, Selects und Labels */
    .theme-dark button, .theme-dark select, .theme-dark label { border: 1px solid #444; }
    .theme-light button, .theme-light select, .theme-light label { border: 1px solid #ccc; }
    .theme-vintage button, .theme-vintage select, .theme-vintage label { border: 1px solid #a67c52; }
    .theme-neon button, .theme-neon select, .theme-neon label { border: 1px solid #39ff14; }
    .theme-pastel button, .theme-pastel select, .theme-pastel label { border: 1px solid #ff8fa3; }
    .theme-ocean button, .theme-ocean select, .theme-ocean label { border: 1px solid #a2d5f2; }
    .theme-forest button, .theme-forest select, .theme-forest label { border: 1px solid #cdeac0; }
    .theme-sunset button, .theme-sunset select, .theme-sunset label { border: 1px solid #4b134f; }
    /* √úberschrift */
    .title {
      font-family: 'Lora', serif;
      font-size: 2.5em;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
      text-transform: uppercase;
    }
    /* Profilbereich */
    #profileContainer {
      width: 100%;
      max-width: 800px;
      background: rgba(0,0,0,0.2);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    #profileImage {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: #ccc;
      object-fit: cover;
      border: 2px solid #fff;
    }
    #profileDetails { flex: 1; color: inherit; }
    #profileDetails h3, #profileDetails p { margin: 3px 0; }
    /* Rang-Badge im Profilbereich */
    .rank-badge {
      background: gold;
      color: #000;
      padding: 3px 6px;
      border-radius: 4px;
      font-weight: bold;
      margin-left: 8px;
      font-size: 0.8em;
    }
    /* Shopbereich */
    #shopContainer {
      width: 100%;
      max-width: 800px;
      background: rgba(0,0,0,0.2);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
    }
    #shopContainer h2 { margin-bottom: 10px; }
    #shopContainer button {
      margin: 5px;
      padding: 5px 10px;
      font-size: 0.9em;
      border-radius: 5px;
      background: rgba(255,255,255,0.2);
      color: inherit;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    #shopContainer button:hover { background: rgba(255,255,255,0.4); }
    /* Refresh-Buttons im Shop */
    #shopContainer .refresh-btn {
      margin-top: 10px;
      background: #0077cc;
      color: #fff;
      border: none;
    }
    #shopContainer .refresh-btn:hover { background: #005fa3; }
    /* Inventarbereich */
    #inventoryContainer {
      width: 100%;
      max-width: 800px;
      background: rgba(0,0,0,0.2);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    #inventoryContainer h2 { text-align: center; margin-bottom: 10px; }
    #inventoryContainer div { margin-bottom: 10px; }
    #inventoryContainer img { margin: 5px; border: 2px solid #fff; border-radius: 4px; cursor: pointer; }
    /* Info Button & Modal */
    #infoBtn {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(255,255,255,0.2);
      border-radius: 50%;
      padding: 10px;
      font-size: 1.5em;
      cursor: pointer;
      transition: background 0.3s ease;
      z-index: 100;
    }
    #infoBtn:hover { background: rgba(255,255,255,0.4); }
    .modal {
      display: none;
      position: fixed;
      z-index: 200;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background: #fff;
      color: #333;
      padding: 20px;
      border-radius: 8px;
      max-width: 600px;
      width: 90%;
      text-align: left;
      font-family: 'Roboto', sans-serif;
    }
    .close-btn {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    .close-btn:hover { color: #000; }
    /* Dropdowns & Buttons */
    .design-controls, .extra-controls {
      margin-bottom: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    .design-controls select, .extra-controls select, .extra-controls button {
      padding: 10px;
      font-size: 1em;
      border-radius: 5px;
      background: rgba(255,255,255,0.2);
      color: inherit;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .design-controls select:hover, .extra-controls select:hover, .extra-controls button:hover {
      background: rgba(255,255,255,0.4);
    }
    /* Statusleiste */
    .status-bar {
      margin-bottom: 15px;
      font-size: 1.1em;
      background: rgba(0,0,0,0.3);
      padding: 10px 15px;
      border-radius: 5px;
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
    }
    .status-item { min-width: 100px; text-align: center; }
    #copyScoreDisplay { display: none; }
    /* Schreibbereich */
    #writeArea {
      width: 100%;
      max-width: 800px;
      height: 300px;
      background: rgba(255,255,255,0.1);
      color: inherit;
      padding: 15px;
      border: 2px solid;
      border-radius: 8px;
      outline: none;
      overflow-y: auto;
      font-size: 1.1em;
      line-height: 1.5em;
      transition: background 0.3s ease;
    }
    .theme-dark #writeArea { border-color: #444; }
    .theme-light #writeArea { border-color: #ccc; }
    .theme-vintage #writeArea { border-color: #a67c52; }
    .theme-neon #writeArea { border-color: #39ff14; }
    .theme-pastel #writeArea { border-color: #ff8fa3; }
    .theme-ocean #writeArea { border-color: #a2d5f2; }
    .theme-forest #writeArea { border-color: #cdeac0; }
    .theme-sunset #writeArea { border-color: #4b134f; }
    #writeArea.warning { background: rgba(200,50,50,0.5); animation: shake 0.5s infinite alternate; }
    @keyframes shake { from { transform: translateX(0); } to { transform: translateX(3px); } }
    /* Copy Challenge */
    #copyTarget {
      display: none;
      border: 2px solid #000;
      background: #fff;
      color: #000;
      padding: 10px;
      font-size: 1.5em;
      font-weight: bold;
      margin-bottom: 10px;
      border-radius: 5px;
    }
    #targetSentence { font-weight: bold; }
    /* Steuerungselemente */
    .controls {
      margin-top: 15px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }
    .controls label, .controls select, .controls button {
      padding: 10px 15px;
      font-size: 1em;
      border-radius: 5px;
      background: rgba(255,255,255,0.2);
      color: inherit;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .controls button:hover, .controls select:hover, .controls label:hover {
      background: rgba(255,255,255,0.4);
    }
    /* Boss-Anzeige */
    #bossContainer { display: none; margin-top: 10px; text-align: center; }
    #bossName { font-size: 1.2em; font-weight: bold; margin-bottom: 5px; }
    #bossHealthBar {
      background: red;
      width: 300px;
      height: 20px;
      border-radius: 10px;
      overflow: hidden;
      margin: 0 auto;
    }
    #bossHealth {
      background: green;
      width: 100%;
      height: 100%;
      transition: width 0.5s ease;
    }
    /* Achievement-Popup */
    .achievement {
      margin-top: 20px;
      padding: 15px;
      background: rgba(255,215,0,0.8);
      border-radius: 8px;
      font-size: 1.2em;
      font-weight: bold;
      color: #333;
      display: none;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    }
    /* Erfolge & Belohnungen */
    .achievements-rewards-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      max-width: 800px;
      width: 100%;
      margin-top: 20px;
    }
    .achievements-section, .rewards-section {
      flex: 1 1 380px;
      background: rgba(0,0,0,0.3);
      padding: 15px;
      border-radius: 8px;
    }
    .achievements-section h2, .rewards-section h2 { text-align: center; margin-bottom: 10px; }
    .achievement-filters {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }
    .achievement-filters label { font-size: 0.9em; }
    .achievement-filters select { padding: 5px; font-size: 0.9em; }
    #achievementTable {
      width: 100%;
      border-collapse: collapse;
    }
    #achievementTable th, #achievementTable td {
      padding: 8px;
      text-align: center;
      border-bottom: 1px solid rgba(255,255,255,0.2);
    }
    #achievementTable th { background: rgba(255,255,255,0.2); }
    /* Leaderboard */
    .leaderboard {
      margin-top: 20px;
      max-width: 800px;
      width: 100%;
      background: rgba(0,0,0,0.3);
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
    }
    .leaderboard table {
      width: 100%;
      border-collapse: collapse;
    }
    .leaderboard th, .leaderboard td {
      padding: 10px;
      text-align: center;
      border-bottom: 1px solid rgba(255,255,255,0.2);
    }
    .leaderboard th { background: rgba(255,255,255,0.2); }
    /* End Session Popup */
    #endSessionPopup {
      display: none;
      position: fixed;
      z-index: 300;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background: #fff;
      color: #333;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      text-align: center;
      max-width: 90%;
    }
    #endSessionPopup button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 1em;
      cursor: pointer;
      border-radius: 5px;
      border: none;
      background: #0077cc;
      color: #fff;
      transition: background 0.3s ease;
    }
    #endSessionPopup button:hover { background: #005fa3; }
    /* CSS Animation f√ºr W√ºrfel-Popup */
    .dice-animation {
      animation: rollDice 0.5s ease-in-out;
    }
    @keyframes rollDice {
      0% { transform: rotate(0deg); }
      50% { transform: rotate(180deg); }
      100% { transform: rotate(360deg); }
    }
    .fade-out {
      animation: fadeOut 1s forwards;
    }
    @keyframes fadeOut {
      to { opacity: 0; }
    }
    /* Responsive Layout */
    @media (max-width: 600px) {
      #writeArea { height: 250px; }
      .status-bar, .controls, .design-controls, .extra-controls, .achievements-rewards-container {
        flex-direction: column;
      }
      #profileContainer { flex-direction: column; align-items: center; }
    }
    /* Button f√ºr Sprachumschaltung */
    #langBtn {
      position: fixed;
      top: 10px;
      left: 10px;
      padding: 5px 10px;
      font-size: 1em;
      cursor: pointer;
      z-index: 300;
    }
  </style>
</head>
<body class="theme-dark">
  <!-- Sprachumschalt-Button -->
  <button id="langBtn" onclick="toggleLanguage()">EN</button>

  <!-- Profilbereich -->
  <div id="profileContainer">
    <img id="profileImage" src="https://via.placeholder.com/80" alt="Profilbild">
    <div id="profileDetails">
      <h3 id="playerName" data-translate="playerName">Spielername</h3>
      <p id="playerRank" data-translate="playerRank">Rang: <span class="rank-badge">Bronze</span></p>
      <p id="playerWissenspunkte" data-translate="playerPoints">Wissenspunkte: 0</p>
    </div>
  </div>

  <!-- Namens√§nderung -->
  <div id="nameChangeContainer">
    <input type="text" id="playerNameInput" data-translate-placeholder="newNamePlaceholder" placeholder="Neuen Namen eingeben">
    <button id="changeNameBtn" data-translate="changeNameBtn">Namen √§ndern</button>
  </div>
  
  <!-- Shopbereich -->
  <div id="shopContainer">
    <h2 data-translate="shopTitle">Shop</h2>
    <div id="shopProfileSection"></div>
    <div id="shopGluecksbringerSection"></div>
    <button class="refresh-btn" onclick="refreshProfile()" data-translate="profileRefresh">Profil Refresh</button>
    <button class="refresh-btn" onclick="refreshGluecksbringer()" data-translate="gluecksbringerRefresh">Gl√ºcksbringer Refresh</button>
  </div>
  
  <!-- Inventarbereich -->
  <div id="inventoryContainer">
    <h2 data-translate="inventoryTitle">Inventar</h2>
    <!-- Inventar wird dynamisch gerendert -->
  </div>
  
  <!-- Info Button & Modal -->
  <button id="infoBtn">‚ÑπÔ∏è</button>
  <div id="infoModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" id="closeInfo">&times;</span>
      <h2 style="color: #0077cc;" data-translate="infoTitle">Willkommen bei Schreibabenteuer DemusOpalium! ‚ú®</h2>
      <p>
        <strong data-translate="infoOverviewTitle">üìú √úberblick:</strong><br>
        <span data-translate="infoOverview">
          Schreibe in variablen Zeitmodi (1‚Äì5 Minuten) spannende Challenges ‚Äì egal ob Freewrite, Adventure, Copy Challenge oder Hardcore. Nur Tippen, kein Kopieren!
        </span>
      </p>
      <p>
        <strong data-translate="infoModesTitle">üöÄ Modi:</strong><br>
        <span data-translate="infoModes">
          Freewrite, Adventure (gegen den Wort-Boss), Copy Challenge und Hardcore.
        </span>
      </p>
      <p>
        <strong data-translate="infoNoticeTitle">‚ö†Ô∏è Hinweis:</strong><br>
        <span data-translate="infoNotice">
          Copy-Paste ist verboten! Schummeln gibt‚Äòs nicht!
        </span>
      </p>
      <p>
        <strong data-translate="infoRewardsTitle">üéâ Belohnungen & Erfolge:</strong><br>
        <span data-translate="infoRewards">
          Schalte Erfolge frei und erhalte coole Rewards ‚Äì dein Fortschritt wird gespeichert!
        </span>
      </p>
    </div>
  </div>
  
  <!-- √úberschrift -->
  <div class="title" data-translate="title">Schreibabenteuer DemusOpalium</div>
  
  <!-- Design & Extra Controls -->
  <div class="design-controls">
    <label for="themeSelect" data-translate="chooseTheme">Theme w√§hlen:</label>
    <select id="themeSelect">
      <option value="theme-dark" selected>Dark</option>
      <option value="theme-light">Light</option>
      <option value="theme-vintage">Vintage</option>
      <option value="theme-neon">Neon</option>
      <option value="theme-pastel">Pastel</option>
      <option value="theme-ocean">Ocean</option>
      <option value="theme-forest">Forest</option>
      <option value="theme-sunset">Sunset</option>
    </select>
    <label for="fontSelect" data-translate="chooseFont">Schriftart w√§hlen:</label>
    <select id="fontSelect">
      <option value="'Roboto', sans-serif" selected>Roboto</option>
      <option value="'Lora', serif">Lora</option>
      <option value="'Merriweather', serif">Merriweather</option>
      <option value="'Open Sans', sans-serif">Open Sans</option>
      <option value="'Courier New', monospace">Courier New</option>
    </select>
  </div>
  <div class="extra-controls">
    <label for="difficultySelect" data-translate="difficulty">Schwierigkeitsgrad:</label>
    <select id="difficultySelect">
      <option value="easy" selected>Einfach</option>
      <option value="normal">Normal</option>
      <option value="hard">Schwer</option>
    </select>
    <label for="librarySelect" data-translate="category">Kategorie:</label>
    <select id="librarySelect">
      <option value="standard" selected>Standard</option>
      <option value="realschule">Realschule</option>
      <option value="gymnasium">Gymnasium</option>
      <option value="medizin">Medizin</option>
      <option value="bank">Bank</option>
      <option value="tierwelt">Tierwelt</option>
      <option value="code_python">Code/Python</option>
    </select>
    <button id="shareBtn" data-translate="shareResults">Ergebnisse Teilen</button>
    <button id="saveProfileBtn" data-translate="saveProfile">Profil Speichern</button>
    <button id="loadProfileBtn" data-translate="loadProfile">Profil Laden</button>
    <input type="file" id="loadProfileInput" style="display:none;" accept=".txt, .json">
  </div>
  
  <!-- Statusleiste -->
  <div class="status-bar">
    <div class="status-item" id="timer" data-translate="time">Time: 01:00</div>
    <div class="status-item" id="wordCount" data-translate="words">Words: 0</div>
    <div class="status-item" id="goalProgress" data-translate="goal">Goal: 0/100</div>
    <div class="status-item" id="xpDisplay" data-translate="xp">XP: 0</div>
    <div class="status-item" id="levelDisplay" data-translate="level">Level: 1</div>
    <div class="status-item" id="wpmDisplay" data-translate="wpm">WPM: 0</div>
    <div class="status-item" id="apmDisplay" data-translate="apm">APM: 0</div>
    <div class="status-item" id="hotStreakIndicator" data-translate="hotStreak">HOT STREAK!</div>
    <div class="status-item" id="copyScoreDisplay" style="display:none;" data-translate="copyScore">Copy Score: 0</div>
  </div>
  
  <!-- Steuerungselemente -->
  <div class="controls">
    <label for="modeSelect" data-translate="mode">Modus:</label>
    <select id="modeSelect">
      <option value="free" data-translate="freeMode">Freewrite (keine Strafe)</option>
      <option value="hardcore" data-translate="hardcoreMode">Hardcore (Text l√∂schen)</option>
      <option value="creative" data-translate="creativeMode">Kreativ (mit Schreibimpuls)</option>
      <option value="adventure" data-translate="adventureMode">Adventure (Boss &amp; EPIC)</option>
      <option value="copy" data-translate="copyMode">Copy Challenge</option>
    </select>
    <label for="timeSelect" data-translate="timeMode">Zeitmodus:</label>
    <select id="timeSelect">
      <option value="1">1 Minute</option>
      <option value="2">2 Minuten</option>
      <option value="3">3 Minuten</option>
      <option value="4">4 Minuten</option>
      <option value="5" selected>5 Minuten</option>
    </select>
    <button id="startBtn" data-translate="prepareGame">Spiel vorbereiten</button>
    <button id="resetBtn" data-translate="reset">Reset</button>
    <button id="promptBtn" style="display:none;" data-translate="showPrompt">Schreibimpuls anzeigen</button>
  </div>
  
  <!-- Copy Challenge -->
  <div id="copyTarget" style="display:none;">&gt; <span id="targetSentence"></span></div>
  <button id="checkBtn" style="display:none;" data-translate="checkSentence">Satz pr√ºfen</button>
  
  <!-- Boss-Anzeige -->
  <div id="bossContainer" style="display:none;">
    <div id="bossName"></div>
    <div id="bossHealthBar"><div id="bossHealth"></div></div>
  </div>
  
  <!-- Schreibbereich -->
  <div id="writeArea" contenteditable="true" data-translate-placeholder="writePlaceholder" placeholder="Hier beginnen zu schreiben..."></div>
  
  <!-- Achievement-Popup -->
  <div class="achievement animate__animated" id="achievementPopup">Achievement unlocked! üéâ</div>
  
  <!-- Erfolge & Belohnungen -->
  <div class="achievements-rewards-container">
    <div class="achievements-section">
      <h2 data-translate="achievementsTitle">Erfolge</h2>
      <div class="achievement-filters">
        <label for="achievementCategoryFilter" data-translate="achievementCategory">Kategorie:</label>
        <select id="achievementCategoryFilter">
          <option value="all" data-translate="all">Alle</option>
          <option value="Freewrite">Freewrite</option>
          <option value="Adventure">Adventure</option>
          <option value="Copy">Copy Challenge</option>
          <option value="Hardcore">Hardcore</option>
          <option value="Allgemein">Allgemeine &amp; Langzeit</option>
          <option value="Kreativ">Kreativ</option>
        </select>
        <label for="achievementDifficultyFilter" data-translate="achievementDifficulty">Schwierigkeitsgrad:</label>
        <select id="achievementDifficultyFilter">
          <option value="all" data-translate="all">Alle</option>
          <option value="easy" data-translate="easy">Leicht</option>
          <option value="normal" data-translate="normal">Normal</option>
          <option value="hard" data-translate="hard">Schwer/Episch</option>
        </select>
      </div>
      <table id="achievementTable">
        <thead>
          <tr>
            <th data-translate="icon">Icon</th>
            <th data-translate="achievement">Erfolg</th>
            <th data-translate="condition">Bedingung</th>
            <th data-translate="status">Status</th>
          </tr>
        </thead>
        <tbody id="achievementBody">
          <!-- Dynamisch generierte Erfolge -->
        </tbody>
      </table>
    </div>
    <div class="rewards-section">
      <h2 data-translate="rewardsTitle">Belohnungen</h2>
      <ul id="rewardList"></ul>
    </div>
  </div>
  
  <!-- Leaderboard -->
  <div class="leaderboard">
    <h2 data-translate="leaderboardTitle">Highscore-Liste ‚≠ê</h2>
    <table id="leaderboardTable">
      <thead>
        <tr>
          <th data-translate="rank">Platz</th>
          <th data-translate="words">W√∂rter</th>
          <th data-translate="xp">XP</th>
        </tr>
      </thead>
      <tbody id="leaderboardBody">
        <!-- Dynamisch bef√ºllte Zeilen -->
      </tbody>
    </table>
  </div>
  
  <!-- End Session Popup -->
  <div id="endSessionPopup" style="display:none;">
    <!-- Der Popup-Inhalt wird dynamisch bef√ºllt -->
  </div>
  
  <script>
    /* --- √úbersetzungs-Objekt mit 3 Sprachen --- */
    const translations = {
      "de": {
        "title": "Schreibabenteuer DemusOpalium",
        "playerName": "Spielername",
        "playerRank": "Rang:",
        "playerPoints": "Wissenspunkte:",
        "newNamePlaceholder": "Neuen Namen eingeben",
        "changeNameBtn": "Namen √§ndern",
        "shopTitle": "Shop",
        "profileRefresh": "Profil Refresh",
        "gluecksbringerRefresh": "Gl√ºcksbringer Refresh",
        "inventoryTitle": "Inventar",
        "infoTitle": "Willkommen bei Schreibabenteuer DemusOpalium! ‚ú®",
        "infoOverviewTitle": "üìú √úberblick:",
        "infoOverview": "Schreibe in variablen Zeitmodi (1‚Äì5 Minuten) spannende Challenges ‚Äì egal ob Freewrite, Adventure, Copy Challenge oder Hardcore. Nur Tippen, kein Kopieren!",
        "infoModesTitle": "üöÄ Modi:",
        "infoModes": "Freewrite, Adventure (gegen den Wort-Boss), Copy Challenge und Hardcore.",
        "infoNoticeTitle": "‚ö†Ô∏è Hinweis:",
        "infoNotice": "Copy-Paste ist verboten! Schummeln gibt‚Äòs nicht!",
        "infoRewardsTitle": "üéâ Belohnungen & Erfolge:",
        "infoRewards": "Schalte Erfolge frei und erhalte coole Rewards ‚Äì dein Fortschritt wird gespeichert!",
        "chooseTheme": "Theme w√§hlen:",
        "chooseFont": "Schriftart w√§hlen:",
        "difficulty": "Schwierigkeitsgrad:",
        "category": "Kategorie:",
        "shareResults": "Ergebnisse Teilen",
        "saveProfile": "Profil Speichern",
        "loadProfile": "Profil Laden",
        "time": "Time: 01:00",
        "words": "Words: 0",
        "goal": "Goal: 0/100",
        "xp": "XP: 0",
        "level": "Level: 1",
        "wpm": "WPM: 0",
        "apm": "APM: 0",
        "hotStreak": "HOT STREAK!",
        "copyScore": "Copy Score: 0",
        "mode": "Modus:",
        "freeMode": "Freewrite (keine Strafe)",
        "hardcoreMode": "Hardcore (Text l√∂schen)",
        "creativeMode": "Kreativ (mit Schreibimpuls)",
        "adventureMode": "Adventure (Boss & EPIC)",
        "copyMode": "Copy Challenge",
        "timeMode": "Zeitmodus:",
        "prepareGame": "Spiel vorbereiten",
        "reset": "Reset",
        "showPrompt": "Schreibimpuls anzeigen",
        "checkSentence": "Satz pr√ºfen",
        "achievementsTitle": "Erfolge",
        "achievementCategory": "Kategorie:",
        "achievementDifficulty": "Schwierigkeitsgrad:",
        "all": "Alle",
        "easy": "Leicht",
        "normal": "Normal",
        "hard": "Schwer/Episch",
        "icon": "Icon",
        "achievement": "Erfolg",
        "condition": "Bedingung",
        "status": "Status",
        "rewardsTitle": "Belohnungen",
        "leaderboardTitle": "Highscore-Liste ‚≠ê",
        "rank": "Platz",
        "writePlaceholder": "Hier beginnen zu schreiben..."
      },
      "en": {
        "title": "Writing Adventure DemusOpalium",
        "playerName": "Player Name",
        "playerRank": "Rank:",
        "playerPoints": "Knowledge Points:",
        "newNamePlaceholder": "Enter new name",
        "changeNameBtn": "Change Name",
        "shopTitle": "Shop",
        "profileRefresh": "Refresh Profile",
        "gluecksbringerRefresh": "Refresh Charm",
        "inventoryTitle": "Inventory",
        "infoTitle": "Welcome to Writing Adventure DemusOpalium! ‚ú®",
        "infoOverviewTitle": "üìú Overview:",
        "infoOverview": "Write exciting challenges in variable time modes (1‚Äì5 minutes) ‚Äì whether it's Freewrite, Adventure, Copy Challenge or Hardcore. Just type, no copying!",
        "infoModesTitle": "üöÄ Modes:",
        "infoModes": "Freewrite, Adventure (against the Word Boss), Copy Challenge and Hardcore.",
        "infoNoticeTitle": "‚ö†Ô∏è Notice:",
        "infoNotice": "Copy-paste is prohibited! No cheating allowed!",
        "infoRewardsTitle": "üéâ Rewards & Achievements:",
        "infoRewards": "Unlock achievements and receive cool rewards ‚Äì your progress will be saved!",
        "chooseTheme": "Choose Theme:",
        "chooseFont": "Choose Font:",
        "difficulty": "Difficulty:",
        "category": "Category:",
        "shareResults": "Share Results",
        "saveProfile": "Save Profile",
        "loadProfile": "Load Profile",
        "time": "Time: 01:00",
        "words": "Words: 0",
        "goal": "Goal: 0/100",
        "xp": "XP: 0",
        "level": "Level: 1",
        "wpm": "WPM: 0",
        "apm": "APM: 0",
        "hotStreak": "HOT STREAK!",
        "copyScore": "Copy Score: 0",
        "mode": "Mode:",
        "freeMode": "Freewrite (no penalty)",
        "hardcoreMode": "Hardcore (text deletion)",
        "creativeMode": "Creative (with writing prompt)",
        "adventureMode": "Adventure (Boss & EPIC)",
        "copyMode": "Copy Challenge",
        "timeMode": "Time Mode:",
        "prepareGame": "Prepare Game",
        "reset": "Reset",
        "showPrompt": "Show Writing Prompt",
        "checkSentence": "Check Sentence",
        "achievementsTitle": "Achievements",
        "achievementCategory": "Category:",
        "achievementDifficulty": "Difficulty:",
        "all": "All",
        "easy": "Easy",
        "normal": "Normal",
        "hard": "Hard/Epic",
        "icon": "Icon",
        "achievement": "Achievement",
        "condition": "Condition",
        "status": "Status",
        "rewardsTitle": "Rewards",
        "leaderboardTitle": "Highscore List ‚≠ê",
        "rank": "Rank",
        "writePlaceholder": "Start writing here..."
      },
      "sw": {
        "title": "Mchezo wa Kuandika DemusOpalium",
        "playerName": "Jina la Mchezaji",
        "playerRank": "Cheo:",
        "playerPoints": "Alama za Maarifa:",
        "newNamePlaceholder": "Weka jina jipya",
        "changeNameBtn": "Badilisha Jina",
        "shopTitle": "Duka",
        "profileRefresh": "Sasisha Wasifu",
        "gluecksbringerRefresh": "Sasisha Vibonzo",
        "inventoryTitle": "Hazina",
        "infoTitle": "Karibu katika Mchezo wa Kuandika DemusOpalium! ‚ú®",
        "infoOverviewTitle": "üìú Muhtasari:",
        "infoOverview": "Andika changamoto za kusisimua kwa dakika 1‚Äì5 ‚Äì iwe ni ya ubunifu, ya shindani au ya ukali. Andika tu, usikite nakili!",
        "infoModesTitle": "üöÄ Mipangilio:",
        "infoModes": "Freewrite, Adventure (kupambana na Bosi wa Maneno), Copy Challenge na Hardcore.",
        "infoNoticeTitle": "‚ö†Ô∏è Onyo:",
        "infoNotice": "Nakili-paste ni marufuku! Usishindwe!",
        "infoRewardsTitle": "üéâ Tuzo na Mafanikio:",
        "infoRewards": "Fungua mafanikio na pokea tuzo nzuri ‚Äì maendeleo yako yatahifadhiwa!",
        "chooseTheme": "Chagua Mandhari:",
        "chooseFont": "Chagua Aina ya Herufi:",
        "difficulty": "Ugonjwa:",
        "category": "Jamii:",
        "shareResults": "Shiriki Matokeo",
        "saveProfile": "Hifadhi Wasifu",
        "loadProfile": "Pakia Wasifu",
        "time": "Wakati: 01:00",
        "words": "Maneno: 0",
        "goal": "Lengo: 0/100",
        "xp": "XP: 0",
        "level": "Kiwango: 1",
        "wpm": "Maneno kwa Dakika: 0",
        "apm": "Mabofya kwa Dakika: 0",
        "hotStreak": "MFAKA ZA MOJA!",
        "copyScore": "Alama za Nakili: 0",
        "mode": "Mpangilio:",
        "freeMode": "Freewrite (hakuna adhabu)",
        "hardcoreMode": "Hardcore (maandishi yatafutwa)",
        "creativeMode": "Ubunifu (na dalili ya kuandika)",
        "adventureMode": "Adventure (Bosi & EPIC)",
        "copyMode": "Copy Challenge",
        "timeMode": "Muda:",
        "prepareGame": "Andaa Mchezo",
        "reset": "Washa upya",
        "showPrompt": "Onyesha Dalili ya Kuandika",
        "checkSentence": "Angalia Sentensi",
        "achievementsTitle": "Mafanikio",
        "achievementCategory": "Jamii:",
        "achievementDifficulty": "Ugonjwa:",
        "all": "Zote",
        "easy": "Rahisi",
        "normal": "Kawaida",
        "hard": "Gumu/Epiki",
        "icon": "Picha",
        "achievement": "Mafanikio",
        "condition": "Hali",
        "status": "Hali",
        "rewardsTitle": "Tuzo",
        "leaderboardTitle": "Orodha ya Nafasi ‚≠ê",
        "rank": "Cheo",
        "writePlaceholder": "Anza kuandika hapa..."
      }
    };

    // Aktuelle Sprache (Standard: Deutsch)
    let currentLanguage = 'de';

    // Sprachumschaltung zyklisch: de -> en -> sw -> de ...
    function toggleLanguage() {
      if (currentLanguage === 'de') {
        currentLanguage = 'en';
      } else if (currentLanguage === 'en') {
        currentLanguage = 'sw';
      } else {
        currentLanguage = 'de';
      }
      updateLanguage();
    }

    // Aktualisiert alle Elemente mit √úbersetzungsschl√ºsseln
    function updateLanguage() {
      document.documentElement.lang = currentLanguage;
      document.title = translations[currentLanguage].title;
      document.querySelectorAll('[data-translate]').forEach(elem => {
        let key = elem.getAttribute('data-translate');
        if (translations[currentLanguage][key]) {
          elem.textContent = translations[currentLanguage][key];
        }
      });
      document.querySelectorAll('[data-translate-placeholder]').forEach(elem => {
        let key = elem.getAttribute('data-translate-placeholder');
        if (translations[currentLanguage][key]) {
          elem.placeholder = translations[currentLanguage][key];
        }
      });
      // Button-Text f√ºr Sprachumschaltung: de->EN, en->SW, sw->DE
      document.getElementById('langBtn').textContent = (currentLanguage === 'de') ? 'EN' : (currentLanguage === 'en' ? 'SW' : 'DE');
    }
    updateLanguage();

    /* --- Restlicher JavaScript-Code --- */
    let timerInterval = null, idleTimeout = null;
    let sessionActive = false;
    let sessionStartTime = null;
    let remainingTime = 60;
    let keyPressCount = 0;
    let hotStreakCounter = 0;
    let lastKeyTime = 0;
    let hotStreakRequired = 20;
    let hotStreakTimeThreshold = 250;
    let waitingForStart = false;
    let copyScore = 0;
    let currentTargetSentence = "";

    let userStats = { 
      xp: 0,
      totalWords: 0,
      longestSession: 0,
      level: 1,
      playerName: "Spielername",
      wissenspunkte: 500,
      profileImage: "",
      inventory: {
        profileImages: [],
        gluecksbringer: []
      }
    };

    const availableProfileImages = [
      "https://i.imgur.com/2cqISZ8.png",
      "https://i.imgur.com/WCghhSg.png",
      "https://i.imgur.com/AG8MXbR.png",
      "https://i.imgur.com/67lln3j.png",
      "https://i.imgur.com/NUfCLza.png",
      "https://i.imgur.com/dyOkN0p.png",
      "https://i.imgur.com/At7GxhG.png"
    ];
    const availableGluecksbringer = [
      "https://i.imgur.com/Qg6no9G.png",
      "https://i.imgur.com/N74fFUp.png",
      "https://i.imgur.com/zrOdwI6.png",
      "https://i.imgur.com/3atajUk.png",
      "https://i.imgur.com/3PAQktM.png",
      "https://i.imgur.com/E3B6FT4.png",
      "https://i.imgur.com/PsEpoi4.png"
    ];
    const shopProfileItems = availableProfileImages.map((url, index) => {
      return { id: "Profilbild " + (index + 1), imgUrl: url, price: 150 + (index * 25) };
    });
    const shopGluecksbringerItems = availableGluecksbringer.map((url, index) => {
      return { id: "Gl√ºcksbringer " + (index + 1), imgUrl: url, price: 150 + (index * 25) };
    });
    const secretKey = "geheimerSchluessel123";
    function generateHash(input) {
      let hash = 0;
      for (let i = 0; i < input.length; i++) {
        const chr = input.charCodeAt(i);
        hash = ((hash << 5) - hash) + chr;
        hash |= 0;
      }
      return hash;
    }

    /* --- Copy-S√§tze --- */
    // Deutsche Satzbibliothek (komplett mit zahlreichen S√§tzen)
    const sentenceLibraries = {
      standard: {
        easy: [
          "Der Hund l√§uft schnell.",
          "Die Sonne scheint hell.",
          "Ich mag Eis.",
          "Der Vogel fliegt hoch.",
          "Der Baum steht im Garten.",
          "Die Katze schl√§ft leise.",
          "Das Auto f√§hrt langsam.",
          "Das Kind lacht fr√∂hlich.",
          "Die Blume duftet angenehm.",
          "Der Regen f√§llt sanft.",
          "Die Wolken ziehen langsam.",
          "Der Wind weht mild.",
          "Das Wasser glitzert im Licht.",
          "Der Schnee bedeckt den Boden.",
          "Die V√∂gel zwitschern im Fr√ºhling.",
          "Der Mond leuchtet in der Nacht.",
          "Die Sterne funkeln am Himmel.",
          "Der Fisch schwimmt im Teich.",
          "Der Hund bellt laut.",
          "Das Haus steht am Wegesrand.",
          "Die Bienen summen im Garten.",
          "Die Kinder spielen im Park.",
          "Der Apfel ist reif.",
          "Das Brot ist frisch gebacken.",
          "Der Zug f√§hrt p√ºnktlich.",
          "Das Buch liegt auf dem Tisch.",
          "Die Uhr zeigt die richtige Zeit.",
          "Der Wind k√ºhlt an hei√üen Tagen.",
          "Die Blumen bl√ºhen im Fr√ºhling.",
          "Der Morgen ist ruhig und friedlich.",
          "Der Hund bellt im Garten.",
          "Die Katze jagt die Maus.",
          "Der Vogel singt am Morgen.",
          "Das Kind malt ein Bild.",
          "Die Blume duftet s√º√ü.",
          "Der Regen tropft leise.",
          "Die Sonne w√§rmt den Tag.",
          "Der Wind weht sanft.",
          "Das Auto parkt am Haus.",
          "Die V√∂gel fliegen hoch.",
          "Der Baum spendet Schatten.",
          "Die Wolken ziehen am Himmel.",
          "Der Fluss flie√üt ruhig.",
          "Das Wasser glitzert im See.",
          "Die Sterne leuchten in der Nacht.",
          "Der Mond scheint hell.",
          "Das Brot riecht frisch.",
          "Die Kinder rennen im Park.",
          "Der Hund rennt im Feld.",
          "Die Bl√§tter fallen leise.",
          "Der Fuchs schleicht durch den Wald.",
          "Die Bienen sammeln Nektar.",
          "Das Pferd galoppiert schnell.",
          "Die Kuh grast auf der Wiese.",
          "Der Vogel baut ein Nest.",
          "Die Blumen leuchten bunt.",
          "Das Licht strahlt durch das Fenster.",
          "Die Musik klingt harmonisch.",
          "Der Regenbogen zeigt sich am Himmel.",
          "Die Schneeflocken tanzen im Wind.",
          "Das Eis schmilzt in der Sonne.",
          "Der Frosch quakt im Teich.",
          "Die Ameisen laufen emsig.",
          "Das Haus ist bunt gestrichen.",
          "Die Gans schwimmt im Teich.",
          "Der Adler fliegt majest√§tisch.",
          "Die Eule ruft in der Nacht.",
          "Das Feuer brennt warm.",
          "Die Wolken bedecken den Himmel.",
          "Der Berg ragt in den Himmel.",
          "Die Blume w√§chst im Fr√ºhling.",
          "Der See ist still und klar.",
          "Die B√§ume rauschen im Wind.",
          "Das Kind spielt fr√∂hlich im Garten.",
          "Der Hund schl√§ft friedlich im K√∂rbchen.",
          "Die Katze schnurrt leise.",
          "Das Wasser sprudelt im Bach.",
          "Die V√∂gel zwitschern fr√∂hlich.",
          "Der Wind bringt frische Luft.",
          "Die Sonne geht langsam unter."
        ],
        normal: [
          "Ein majest√§tischer Adler kreist hoch am azurblauen Himmel und inspiriert alle, die ihn beobachten.",
          "Der schimmernde Fluss schl√§ngelt sich elegant durch die gr√ºne Landschaft, w√§hrend die Sonne funkelnde Reflexionen wirft.",
          "In einem belebten Markt flanieren Menschen, w√§hrend exotische D√ºfte die Luft erf√ºllen.",
          "Die alten Gem√§uer einer Burg erz√§hlen Geschichten von Mut und Verrat in jeder Steinplatte.",
          "Ein schlauer Fuchs schleicht durch den nebelverhangenen Wald, immer auf der Suche nach seiner Beute.",
          "Die zarten Rosen im Garten verstr√∂men einen bet√∂renden Duft, der Erinnerungen an vergangene Zeiten weckt.",
          "Ein einsamer Wanderer erklimmt beharrlich den steilen Berg, getrieben von der Sehnsucht nach Freiheit.",
          "Die goldenen Felder im Sommer wiegen sanft im Wind, als ob sie ein geheimes Lied singen w√ºrden.",
          "Ein mystischer Nebel legt sich √ºber das Tal und verwandelt die Landschaft in ein M√§rchenland.",
          "Die alten Eichen, Zeugen vieler Jahre, fl√ºstern leise von vergangenen Abenteuern.",
          "Ein kleiner Bach murmelt fr√∂hlich vor sich hin, w√§hrend er durch √ºppiges Gr√ºn pl√§tschert.",
          "Die sanfte Brise tr√§gt den Geruch von frisch gem√§htem Gras und bl√ºhenden Blumen heran.",
          "Ein eleganter Schwan gleitet majest√§tisch √ºber den stillen See, als w√§re er die K√∂nigin der Gew√§sser.",
          "Die tiefblauen Tiefen des Meeres verbergen Geheimnisse, die nur die Mutigsten zu l√ºften wagen.",
          "Ein geheimnisvoller Regenbogen spannt sich √ºber den Horizont und verhei√üt magische Zeiten.",
          "Bunte Schmetterlinge tanzen fr√∂hlich zwischen den duftenden Fr√ºhlingsblumen.",
          "Ein alter Seemann erz√§hlt in verrauchten Tavernen Geschichten von fernen L√§ndern und verlorenen Sch√§tzen.",
          "Die flackernden Lichter einer n√§chtlichen Stadt spiegeln sich in den ruhigen Wasserwegen wider.",
          "Ein junger K√ºnstler malt mit leuchtenden Farben ein Bild, das die Seele ber√ºhrt.",
          "Die k√ºhle Nachtluft f√ºllt sich mit dem sanften Klang einer einsamen Geige.",
          "Ein tapferer Ritter reitet durch den nebligen Morgen, bereit, f√ºr seine Ehre zu k√§mpfen.",
          "Die funkelnden Sterne am klaren Himmel erz√§hlen von unendlichen M√∂glichkeiten und Tr√§umen.",
          "Ein geheimnisvoller Wald, in dem jeder Schritt ein neues Abenteuer verspricht, zieht den Suchenden in seinen Bann.",
          "Die alten Stra√üen einer Stadt sind Zeugen vergangener Zeiten, in denen Legenden geboren wurden.",
          "Ein sanfter Regen h√ºllt die Welt in einen Schleier aus Frische und Neubeginn.",
          "Die zarten Kl√§nge eines Klaviers verweben sich mit dem Rauschen der B√§ume zu einer Natur-Symphonie.",
          "Ein fr√∂hlicher Vogel singt ein Lied, das Hoffnung und Freude in jedes Herz tr√§gt.",
          "Funkenartige Tautropfen auf den Bl√§ttern malen ein Bild der Reinheit in der Morgensonne.",
          "Ein alter Leuchtturm wacht still √ºber die st√ºrmische K√ºste und weist verlorenen Seefahrern den Weg.",
          "Die ersten Sonnenstrahlen brechen durch den Morgennebel und erwecken die Welt zu neuem Leben.",
          "Ein weiser alter Mann sitzt im Schatten eines Baumes und teilt seine Lebenserfahrungen mit den Jungen.",
          "Die majest√§tischen Berge erheben sich stolz gegen den klaren Himmel und erz√§hlen Geschichten von unersch√ºtterlicher Kraft.",
          "Ein sanfter Wind spielt mit den Bl√§ttern und tr√§gt leise Melodien durch die Luft.",
          "Die glitzernde Oberfl√§che eines Sees spiegelt die unendliche Weite des Himmels wider.",
          "Ein eleganter Pfau pr√§sentiert sein farbenfrohes Gefieder in einem Fest der Natur.",
          "Die gl√ºhende Abendd√§mmerung taucht die Welt in ein warmes, goldenes Licht.",
          "Ein neugieriger Fuchs erkundet die geheimen Pfade des Waldes mit unerm√ºdlicher Neugier.",
          "Tautropfen auf einem Spinnennetz gl√§nzen wie kleine Diamanten im Morgengrauen.",
          "Ein sanfter Bach windet sich durch ein Tal, als erz√§hle er die Geschichten der Erde.",
          "Die alten Ruinen einer Stadt fl√ºstern von vergangenen Reichen und vergessenen Heldentaten.",
          "Ein leiser Windhauch tr√§gt den Klang alter Legenden in die Herzen derer, die zuh√∂ren.",
          "Die sternenklare Nacht enth√ºllt das verborgene Glitzern der Milchstra√üe, das den Himmel verzaubert.",
          "Ein lebhafter Markt erf√ºllt die Stra√üen mit fr√∂hlichen Stimmen und dem Duft von frisch gebackenem Brot.",
          "Die sanfte W√§rme eines Sommers l√§sst die Zeit stillzustehen und erf√ºllt die Seele mit Gl√ºck.",
          "Ein tapferer Krieger steht am Rande eines gewaltigen Schlachtfelds und blickt entschlossen in die Zukunft.",
          "Die leuchtenden Farben eines Herbstwaldes malen ein Bild, das die Verg√§nglichkeit der Zeit feiert.",
          "Ein junger Dichter sitzt am Ufer eines Flusses und l√§sst sich von den sanften Wellen inspirieren.",
          "Die klare Luft eines Berggipfels erf√ºllt den Geist mit frischer Energie und unendlicher Weite.",
          "Ein geheimnisvoller Nebel senkt sich √ºber die Felder und h√ºllt die Welt in einen Schleier des Unbekannten.",
          "Die ersten Fr√ºhlingsblumen brechen tapfer durch den Schnee und verk√ºnden das Ende des Winters.",
          "Ein leuchtender Regenbogen spannt sich √ºber den Himmel und verbindet die Erde mit dem Firmament.",
          "Die sanften Kl√§nge einer Geige erklingen in einem alten Theater und erwecken Erinnerungen an vergangene Zeiten.",
          "Ein junger Abenteurer tritt mutig in die weite Welt hinaus, getrieben von der Sehnsucht nach Freiheit.",
          "Die goldene Stunde verzaubert die Landschaft mit warmen, sanften T√∂nen, die die Seele ber√ºhren.",
          "Ein mystischer Nebel umgibt die alten W√§lder und l√§sst die Grenzen zwischen Realit√§t und Traum verschwimmen.",
          "Die ruhige See reflektiert den klaren Himmel und schenkt jedem, der sie betrachtet, einen Moment der Stille.",
          "Ein funkelnder Wasserfall st√ºrzt in einem verborgenen Tal herab und erzeugt ein Rauschen, das an Magie erinnert.",
          "Die sanfte Ber√ºhrung eines k√ºhlen Windes bringt den Duft des Fr√ºhlings direkt in dein Herz."
        ],
        hard: [
          "Inmitten eines tobenden Sturms bahnt sich ein einsamer Held seinen Weg durch die √ºbers√§teten Tr√ºmmer der verlassenen Stadt, w√§hrend der Wind unerbittlich heult.",
          "Die unaufh√∂rlichen Regentropfen verschmelzen mit den Tr√§nen des Verzweifelten, der in den dunklen Gassen nach einem Funken Hoffnung sucht.",
          "W√§hrend die finsteren Wolken den Himmel verdunkeln, enth√ºllt ein mutiger Dichter in seinen Versen die tiefen Abgr√ºnde menschlicher Emotionen.",
          "In den verfallenen Ruinen einer alten Festung, wo einst heldenhafte Taten vollbracht wurden, erkundet ein entschlossener Abenteurer das Geheimnis der Vergangenheit.",
          "Obwohl die Zeit gnadenlos voranschreitet, bewahrt ein alter Gelehrter in seinen Schriften die unverg√§nglichen Wahrheiten vergangener Zeiten.",
          "Mit jeder Zeile, die er schreibt, enth√ºllt der Dichter eine verborgene Welt, in der die Grenzen zwischen Realit√§t und Traum verschwimmen.",
          "Der kalte Hauch des Winters mischt sich mit dem warmen Glanz eines verblassenden Sonnenaufgangs, w√§hrend ein Reisender in die endlosen Weiten der Ungewissheit zieht.",
          "In den Schatten einer l√§ngst vergessenen Zivilisation findet ein Arch√§ologe Hinweise auf ein Mysterium, das das Schicksal ganzer Reiche beeinflussen k√∂nnte.",
          "Die d√ºsteren Geheimnisse eines verlassenen Schlosses werden nach und nach von einem entschlossenen Detektiv enth√ºllt, der sich den Abgr√ºnden der menschlichen Seele stellt.",
          "W√§hrend die Sterne unerm√ºdlich am n√§chtlichen Firmament leuchten, erz√§hlt eine alte Legende von einem Helden, der einst das Unm√∂gliche m√∂glich machte.",
          "In einem Labyrinth aus Erinnerungen und vergessenen Tr√§umen k√§mpft ein einsamer Geist darum, die verlorene Sch√∂nheit vergangener Zeiten wiederzufinden.",
          "Mit unersch√ºtterlicher Entschlossenheit durchquert ein Wanderer das trostlose √ñdland, dessen karge Sch√∂nheit von unerkl√§rlichen Geheimnissen durchdrungen ist.",
          "Die leisen Melodien eines vergessenen Liedes hallen durch die verfallenen G√§nge einer alten Bibliothek, in der das Wissen vergangener Generationen bewahrt wird.",
          "Tief in den dunklen Tiefen einer verlassenen Mine entdeckt ein mutiger Abenteurer funkelnde Edelsteine, die von uralten Geheimnissen zeugen.",
          "Obwohl der Himmel von dunklen Wolken verh√ºllt ist, k√§mpft ein tapferer Krieger mit unbeirrbarem Mut gegen die Schatten seiner eigenen Vergangenheit.",
          "W√§hrend der Wind durch die verwitterten B√§ume rauscht, offenbart sich ein verborgener Pfad, der zu einer Welt f√ºhrt, die in Vergessenheit geraten ist.",
          "Inmitten eines tosenden Sturms steht ein alter Leuchtturm als stiller W√§chter, der den Schiffen den Weg durch die t√ºckischen Gew√§sser weist.",
          "Die melancholischen Kl√§nge eines einsamen Klaviers erf√ºllen einen verlassenen Ballsaal und lassen die Geister vergangener Feste wieder lebendig werden.",
          "Mit jeder verstreichenden Sekunde enth√ºllt sich ein neues Kapitel des Lebens, w√§hrend ein alter Chronist die unverg√§nglichen Geschichten der Menschheit niederschreibt.",
          "Obwohl der kalte Nebel die Landschaft umh√ºllt, durchdringt ein strahlender Lichtstrahl die Dunkelheit und schenkt dem Verlorenen einen Hauch von Hoffnung.",
          "In den br√∂ckelnden Mauern einer uralten Kathedrale finden sich verborgene Inschriften, die von einem g√∂ttlichen Mysterium berichten.",
          "Die unendlichen Weiten einer stillen W√ºste werden von den Spuren eines reisenden Nomaden durchzogen, der in den Sanden nach dem Sinn des Lebens sucht.",
          "Mit jedem Schritt, den der m√ºde Wanderer setzt, hallt das Echo vergangener Zeiten wider und erinnert an verlorene Tr√§ume.",
          "W√§hrend der Regen unabl√§ssig auf die staubigen Stra√üen prasselt, enth√ºllt ein alter Geschichtenerz√§hler die Legenden einer l√§ngst vergangenen Epoche.",
          "Die funkelnden Lichter einer Metropole spiegeln sich in den nassen Pflastersteinen, w√§hrend ein einsamer Beobachter den Puls der Stadt sp√ºrt.",
          "In den verworrenen Gassen einer alten Stadt, in der jeder Winkel von Geheimnissen durchdrungen ist, sucht ein unerm√ºdlicher Detektiv nach der Wahrheit.",
          "Obwohl die Schatten der Vergangenheit unheilvoll √ºber den Ruinen liegen, leuchtet der Funke des Neuanfangs in den Augen eines Tr√§umers.",
          "Mit der Pr√§zision eines erfahrenen Meisters enth√ºllt ein K√ºnstler in seinen Gem√§lden die tiefen, unergr√ºndlichen Facetten der menschlichen Seele.",
          "Die unerbittliche K√§lte eines frostigen Abends wird nur von der flammenden Leidenschaft eines jungen Poeten durchbrochen, der seine Worte wie Feuer in die Nacht schickt.",
          "In den verlassenen Gassen einer historischen Stadt, in der die Zeit stillzustehen scheint, werden die Geheimnisse einer verlorenen √Ñra behutsam offenbart.",
          "W√§hrend der st√ºrmische Wind die D√§cher der alten H√§user zum Beben bringt, k√§mpft ein entschlossener Held gegen die Dunkelheit, die seine Welt bedroht.",
          "Die unendlichen Weiten des n√§chtlichen Himmels inspirieren einen Schriftsteller, dessen Worte die Grenzen zwischen Traum und Wirklichkeit aufl√∂sen.",
          "Obwohl die Stra√üen von den Schatten vergangener Zeiten heimgesucht werden, erstrahlt das Licht der Hoffnung in den Herzen derer, die daran glauben.",
          "Mit jeder Zeile, die ein alter Dichter schreibt, erwacht ein Hauch der Vergangenheit zum Leben und erz√§hlt von vergessenen Heldentaten.",
          "In einem verfallenen Schloss, das von Legenden umwoben ist, findet ein junger Abenteurer den Schl√ºssel zu einem unerwarteten Geheimnis.",
          "Die funkelnden Sterne am dunklen Firmament scheinen die verlorenen Tr√§ume der Menschheit zu bewahren und sie in einem silbernen Licht zu umh√ºllen.",
          "W√§hrend ein kalter Wind die bl√ºhenden Wiesen √ºberzieht, enth√ºllt ein alter Wanderer in seinen Geschichten die unverg√§ngliche Sch√∂nheit der Natur.",
          "In den Tiefen einer verlassenen Mine, wo das Echo vergangener Tage widerhallt, entdeckt ein mutiger Forscher die Sch√§tze der Erde.",
          "Obwohl der Tag sich dem Ende zuneigt, bringt die sanfte Melodie eines fernen Liedes Trost und Zuversicht in die Herzen der Menschen.",
          "Mit unerbittlicher Entschlossenheit bahnt sich ein Held seinen Weg durch ein Labyrinth aus Intrigen und dunklen Geheimnissen.",
          "Die dichten Nebelschwaden, die √ºber das Land ziehen, verbergen die Spuren einer l√§ngst vergessenen Zivilisation, die nur darauf wartet, entdeckt zu werden.",
          "W√§hrend der Regen in silbernen Tropfen vom Himmel f√§llt, erinnert ein weiser Geschichtenerz√§hler an die Macht der Erinnerungen.",
          "Die gl√ºhenden Farben eines Sonnenuntergangs verschmelzen mit den Schatten der Nacht, w√§hrend ein einsamer Wanderer seinen Weg ins Unbekannte findet.",
          "In einem alten Theater, in dem einst gro√üe Dramen aufgef√ºhrt wurden, hallen noch immer die Echos vergangener Emotionen wider.",
          "Obwohl die Welt von Chaos und Dunkelheit √ºberschattet wird, erhebt sich der Geist der Hoffnung in den stillen Augen eines Kindes.",
          "Mit jeder verstreichenden Stunde enth√ºllt sich ein neues Mosaik aus Licht und Schatten, das die Seele tief ber√ºhrt.",
          "Die melancholischen Kl√§nge eines einsamen Saxophons erf√ºllen die verlassene Gasse und erz√§hlen von verlorener Liebe und Sehnsucht.",
          "In den verwitterten Archiven einer alten Bibliothek werden die Geheimnisse der Menschheit bewahrt, bereit, von neugierigen Geistern entschl√ºsselt zu werden.",
          "W√§hrend der kalte Mond am Himmel thront, tanzen die Schatten der Vergangenheit auf den Pflastersteinen einer stillen Stadt.",
          "Die verh√§ngnisvolle Stille einer verlassenen Stra√üe wird nur durch das entfernte Rauschen eines Flusses durchbrochen, der von alten Legenden erz√§hlt.",
          "Obwohl der Frost die Landschaft in ein glitzerndes Wunderland verwandelt, sucht ein einsamer Reisender nach der W√§rme vergangener Zeiten.",
          "Mit der Pr√§zision eines Uhrwerks enth√ºllt ein alter Chronist in seinen Aufzeichnungen die geheimen Rhythmen der Zeit.",
          "Die schattenhaften Konturen eines verfallenen Geb√§udes erz√§hlen von einer √Ñra, in der Heldentum und Tragik untrennbar miteinander verbunden waren.",
          "W√§hrend der Wind durch die zerfallenen Mauern eines alten Forts pfeift, wird das Echo vergangener Schlachten lebendig.",
          "In den dunklen Tiefen eines alten Waldes, wo jedes Ger√§usch eine Geschichte birgt, findet ein Suchender den Schl√ºssel zur Wahrheit.",
          "Obwohl die Sterne √ºber einer stillen Landschaft wachen, entfaltet sich ein Drama, das nur die Nacht zu erz√§hlen vermag.",
          "Die elegante Bewegung eines Panthers, der lautlos durch das Dickicht schleicht, verk√∂rpert die Raffinesse und Effizienz nat√ºrlicher √úberlebensstrategien.",
          "Die synchronisierten Spr√ºnge einer Gazelle, die in einem anmutigen Ballett vor einem Raubtier flieht, illustrieren evolution√§re Raffinesse und √úberlebensinstinkt.",
          "In den unzug√§nglichen Tiefen eines tropischen Regenwaldes zeigt sich die beeindruckende Vielfalt an Arten, die in einem fragilen √∂kologischen Gleichgewicht existieren.",
          "Die ausgekl√ºgelten Tarnmechanismen zahlreicher Tierarten erm√∂glichen es ihnen, sich nahezu unsichtbar an ihre Umgebung anzupassen und so ihre √úberlebenschancen zu maximieren.",
          "Die koordinierte Flucht von Beutetieren in einem Schwarm demonstriert ein ausgekl√ºgeltes System kollektiver √úberlebensstrategien, das die Natur in ihrer Komplexit√§t widerspiegelt.",
          "Die kunstvoll orchestrierten Laut√§u√üerungen von Walen, die als Kommunikationsmittel dienen, sind ein faszinierendes Zeugnis tierischer Intelligenz.",
          "Der majest√§tische Flug eines Adlers, der hoch √ºber weiten Landschaften kreist, symbolisiert die unendliche Freiheit und St√§rke der Natur.",
          "Die ausgefeilten √úberlebensstrategien, die von komplexen Tarnmechanismen bis zu synchronisierten Fluchtbewegungen reichen, zeugen von der evolution√§ren Kreativit√§t der Tierwelt.",
          "In den weiten Ebenen der Savanne demonstriert die rasche Flucht einer Gazelle vor einem Raubtier einen hochentwickelten √úberlebensinstinkt, der das Wesen der Natur pr√§gt.",
          "Die au√üergew√∂hnliche Anpassungsf√§higkeit der Tiere an extreme Umweltbedingungen spiegelt die unerm√ºdliche Kraft der Evolution wider.",
          "Durch die komplexen sozialen Strukturen in Tierherden wird ein ausgepr√§gtes System von Kooperation und Kommunikation sichtbar.",
          "Die nat√ºrliche Eleganz der Tierwelt, sichtbar in den harmonischen Bewegungen eines Schwans, verk√∂rpert die unber√ºhrte Sch√∂nheit der Natur.",
          "Die kunstvollen Balzrituale vieler Vogelarten zeugen von einem tiefen, instinktiven Verst√§ndnis f√ºr die Bedeutung von Partnerschaft und Fortpflanzung.",
          "Die synchronisierten Flugmuster eines Vogelschwarmes, die den Himmel in ein atemberaubendes Farbspektakel tauchen, demonstrieren die kollektive Intelligenz und den Zusammenhalt der Tierwelt."
        ],
        hard: [
          "In den unendlichen Weiten der afrikanischen Savanne demonstriert die komplexe Sozialstruktur der Elefantenherde ein beeindruckendes Ma√ü an Kommunikation und Zusammenhalt.",
          "Die majest√§tische Elefantenherde zieht in harmonischer Formation durch die Ebenen, w√§hrend die √Ñltesten das Wissen √ºber Generationen weitergeben.",
          "Im dichten Dschungel offenbart der Leopard durch seine lautlose Bewegung eine evolution√§re Raffinesse, die ihn zum Inbegriff der Tarnung erhebt.",
          "Die farbenpr√§chtigen Balzrituale zahlreicher Vogelarten zeugen von einer ausgekl√ºgelten kulturellen Vielfalt, die die Tierwelt in all ihren Facetten widerspiegelt.",
          "Das Cham√§leon passt sich mit verbl√ºffender Pr√§zision an wechselnde Umgebungsbedingungen an, indem es seine Farbe dynamisch √§ndert.",
          "Die synchronen Bewegungen eines Fischschwarms, die ein lebendiges Farbenspiel im Ozean kreieren, illustrieren ein kollektives Verhalten von h√∂chster Raffinesse.",
          "In den tiefsten Regionen des Ozeans erzeugen biolumineszente Kreaturen ein atemberaubendes Schauspiel, das die Grenzen zwischen Licht und Dunkelheit verwischt.",
          "Der majest√§tische Adler, der hoch oben am Himmel kreist, symbolisiert Freiheit und die unendliche Weite der Natur in ihrer reinsten Form.",
          "Die ausgekl√ºgelte Kommunikationsf√§higkeit von Walen, die in komplexen Ges√§ngen ihre Emotionen und Botschaften √ºber weite Entfernungen senden, zeugt von tierischer Intelligenz.",
          "Die evolution√§re Anpassungsf√§higkeit von Tieren in arktischen Regionen, die trotz extremen Wetters √ºberleben, ist ein beeindruckendes Zeugnis nat√ºrlicher Widerstandskraft.",
          "Im Korallenriff formen farbenpr√§chtige Korallen ein schillerndes Unterwasserparadies, in dem zahlreiche Fischarten in einem fragilen Gleichgewicht leben.",
          "Die lautlose Jagd eines Panthers im dichten Dschungel demonstriert eine evolution√§re Raffinesse, die ihn zum Inbegriff der Tarnung erhebt.",
          "Die kunstvoll organisierten Nester zahlreicher Vogelarten zeugen von einer perfekten Symbiose aus Instinkt, Kreativit√§t und architektonischem K√∂nnen.",
          "Die synchronen Aktivit√§ten eines Bienenschwarms, der in beeindruckender Pr√§zision Nektar sammelt, illustrieren ein hohes Ma√ü an kollektiver Intelligenz.",
          "In den Tiefen tropischer Gew√§sser enth√ºllen biolumineszente Organismen ein magisches Lichtspiel, das die Grenzen zwischen Realit√§t und Traum aufl√∂st.",
          "Die langwierige Migration von Walen √ºber tausende Kilometer zeugt von einem tief verwurzelten, instinktiven Verst√§ndnis der Meeresumgebungen.",
          "Die komplexen sozialen Strukturen in Wolfsrudeln, in denen Weisheit und Erfahrung von den √Ñltesten weitergegeben werden, demonstrieren kollektive Intelligenz auf h√∂chstem Niveau.",
          "Die kunstvoll choreografierten Balzrituale zahlreicher Vogelarten offenbaren eine kulturelle Vielfalt, die ihresgleichen sucht.",
          "Der eindrucksvolle Blick eines Luchses, der in verschneiten W√§ldern auf Beute lauert, zeugt von einer raffinierten Kombination aus Instinkt und Pr√§zision.",
          "Die nahezu unsichtbare Anpassungsf√§higkeit eines Cham√§leons an seine Umgebung illustriert evolution√§re Meisterschaft in der Tarnung.",
          "Die synchronisierten Bewegungen eines Vogelschwarmes, die den Himmel in ein lebendiges Mosaik verwandeln, zeugen von kollektiver Intelligenz und Harmonie.",
          "In einem mystischen Wald, wo jedes Rascheln eine Geschichte erz√§hlt, offenbart sich die subtile Sch√∂nheit der Tierwelt in ihrer ganzen Vielfalt.",
          "Die langwierige Migration von Zugv√∂geln √ºber Kontinente hinweg ist ein beeindruckendes Ph√§nomen, das von instinktiver Navigation und √úberlebenswillen gepr√§gt ist.",
          "Die ausgekl√ºgelten √úberlebensstrategien von Beutetieren, die durch koordinierte Fluchtman√∂ver ihre Chancen maximieren, sind ein Zeugnis evolution√§rer Innovation.",
          "Die architektonisch beeindruckenden Bauten von Bibern zeugen von hoher Intelligenz und kooperativem, instinktiv gesteuertem Verhalten.",
          "Subtile Ver√§nderungen in den Laut√§u√üerungen von Walen, die ihre emotionale Verfassung widerspiegeln, offenbaren ein ausgepr√§gtes Ma√ü an Sensibilit√§t.",
          "Die schimmernden Schuppen eines exotischen Fisches, die das Sonnenlicht in einem atemberaubenden Farbenspiel reflektieren, demonstrieren nat√ºrliche √Ñsthetik auf h√∂chstem Niveau.",
          "Die komplexen Balzrituale von Insektenarten zeugen von einer √ºberraschenden Vielfalt an Kommunikationsformen in der Natur.",
          "Der elegante Tanz eines Schmetterlings, der von Blume zu Blume flattert, ist ein lebendiger Beweis f√ºr die Zerbrechlichkeit und Sch√∂nheit der Natur.",
          "Die synchronisierten Spr√ºnge einer Gazelle, die in einem anmutigen Ballett vor einem Raubtier flieht, illustrieren evolution√§re Raffinesse und √úberlebensinstinkt.",
          "In den unzug√§nglichen Tiefen eines tropischen Regenwaldes zeigt sich die beeindruckende Vielfalt an Arten, die in einem fragilen √∂kologischen Gleichgewicht existieren.",
          "Die ausgekl√ºgelten Tarnmechanismen zahlreicher Tierarten erm√∂glichen es ihnen, sich nahezu unsichtbar an ihre Umgebung anzupassen und so ihre √úberlebenschancen zu maximieren.",
          "Die koordinierte Flucht von Beutetieren in einem Schwarm demonstriert ein ausgekl√ºgeltes System kollektiver √úberlebensstrategien, das die Natur in ihrer Komplexit√§t widerspiegelt.",
          "Die kunstvoll orchestrierten Laut√§u√üerungen von Walen, die als Kommunikationsmittel dienen, sind ein faszinierendes Zeugnis tierischer Intelligenz.",
          "Der majest√§tische Flug eines Adlers, der hoch √ºber weiten Landschaften kreist, symbolisiert die unendliche Freiheit und St√§rke der Natur.",
          "Die ausgefeilten √úberlebensstrategien, die von komplexen Tarnmechanismen bis zu synchronisierten Fluchtbewegungen reichen, zeugen von der evolution√§ren Kreativit√§t der Tierwelt.",
          "In den weiten Ebenen der Savanne demonstriert die rasche Flucht einer Gazelle vor einem Raubtier einen hochentwickelten √úberlebensinstinkt, der das Wesen der Natur pr√§gt.",
          "Die au√üergew√∂hnliche Anpassungsf√§higkeit der Tiere an extreme Umweltbedingungen spiegelt die unerm√ºdliche Kraft der Evolution wider.",
          "Durch die komplexen sozialen Strukturen in Tierherden wird ein ausgepr√§gtes System von Kooperation und Kommunikation sichtbar.",
          "Die nat√ºrliche Eleganz der Tierwelt, sichtbar in den harmonischen Bewegungen eines Schwans, verk√∂rpert die unber√ºhrte Sch√∂nheit der Natur.",
          "Die kunstvollen Balzrituale vieler Vogelarten zeugen von einem tiefen, instinktiven Verst√§ndnis f√ºr die Bedeutung von Partnerschaft und Fortpflanzung.",
          "Die synchronisierten Flugmuster eines Vogelschwarmes, die den Himmel in ein atemberaubendes Farbspektakel tauchen, demonstrieren die kollektive Intelligenz und den Zusammenhalt der Tierwelt."
        ]
      },
      realschule: {
        easy: [
          "Der Sch√ºler lernt t√§glich in der Realschule.",
          "Sch√ºler entwickeln ein tiefgreifendes Verst√§ndnis f√ºr Bildung."
          // Weitere S√§tze k√∂nnen hier erg√§nzt werden‚Ä¶
        ],
        normal: [
          "Im Realschulunterricht werden theoretische Konzepte mit praxisnahen Anwendungen verkn√ºpft, um den Sch√ºlern ein umfassendes Verst√§ndnis zu vermitteln.",
          "Sch√ºler entwickeln ein tiefgreifendes Verst√§ndnis f√ºr die Bedeutung von Bildung als Grundlage f√ºr eine erfolgreiche Zukunft."
          // Weitere S√§tze‚Ä¶
        ],
        hard: [
          "Die Realschule implementiert einen anspruchsvollen Lehrplan, der theoretische Konzepte mit praxisorientierten Projekten verkn√ºpft, um den Sch√ºlern ein fundiertes Verst√§ndnis komplexer Zusammenh√§nge zu vermitteln.",
          "Die enge Zusammenarbeit zwischen verschiedenen Fachbereichen f√∂rdert ein umfassendes Verst√§ndnis der globalen Zusammenh√§nge."
          // Weitere S√§tze‚Ä¶
        ]
      },
      gymnasium: {
        easy: [
          "Der Sch√ºler liest ein anspruchsvolles Buch.",
          "Die Lehrerin erkl√§rt komplexe Themen geduldig.",
          "Im Unterricht diskutieren die Sch√ºler lebhaft √ºber philosophische Fragen."
          // Weitere S√§tze‚Ä¶
        ],
        normal: [
          "Im Gymnasium wird ein anspruchsvoller Lehrplan verfolgt, der klassische und moderne Bildungselemente miteinander verkn√ºpft.",
          "Sch√ºler analysieren literarische Werke und gewinnen dadurch ein tiefes Verst√§ndnis f√ºr kulturelle Hintergr√ºnde."
          // Weitere S√§tze‚Ä¶
        ],
        hard: [
          "Im Gymnasium wird ein rigoroser Lehrplan verfolgt, der die Sch√ºler dazu anregt, tiefgreifende Analysen literarischer, historischer und naturwissenschaftlicher Ph√§nomene durchzuf√ºhren.",
          "Die intensive Auseinandersetzung mit klassischen Texten f√∂rdert ein kritisches Verst√§ndnis der kulturellen Wurzeln moderner Gesellschaften."
          // Weitere S√§tze‚Ä¶
        ]
      },
      medizin: {
        easy: [
          "Der Arzt untersucht den Patienten.",
          "Die Krankenschwester reicht dem Patienten das Medikament."
          // Weitere S√§tze‚Ä¶
        ],
        normal: [
          "In der modernen Klinik werden fortschrittliche Diagnoseverfahren eingesetzt, um die Gesundheit der Patienten pr√§zise zu beurteilen.",
          "Die interdisziplin√§re Zusammenarbeit optimiert den Behandlungsprozess."
          // Weitere S√§tze‚Ä¶
        ],
        hard: [
          "In hochmodernen Forschungslabors werden neuartige therapeutische Ans√§tze entwickelt, die auf der pr√§zisen Analyse genetischer Daten basieren.",
          "Die personalisierte Medizin revolutioniert die Behandlung schwerer Erkrankungen durch individuelle genetische Profile."
          // Weitere S√§tze‚Ä¶
        ]
      },
      bank: {
        easy: [
          "Der Kunde betritt die Bank.",
          "Die Bank ist modern und einladend."
          // Weitere S√§tze‚Ä¶
        ],
        normal: [
          "Die Bank bietet ein breites Spektrum moderner Finanzdienstleistungen an.",
          "Kunden profitieren von pers√∂nlicher Beratung und digitalen Services."
          // Weitere S√§tze‚Ä¶
        ],
        hard: [
          "In einem global vernetzten Finanzsystem nutzt die Bank fortschrittliche Analysemethoden, um komplexe Marktbewegungen pr√§zise zu prognostizieren.",
          "Die Integration von Big-Data-Technologien erm√∂glicht eine detaillierte Risikoanalyse."
          // Weitere S√§tze‚Ä¶
        ]
      },
      tierwelt: {
        easy: [
          "Der Hund bellt im Garten.",
          "Die Katze jagt eine Maus."
          // Weitere S√§tze‚Ä¶
        ],
        normal: [
          "In der afrikanischen Savanne demonstriert die Giraffe ihre beeindruckende Anpassungsf√§higkeit.",
          "Die synchronisierten Bewegungen eines Fischschwarms illustrieren kollektives Verhalten."
          // Weitere S√§tze‚Ä¶
        ],
        hard: [
          "In den unendlichen Weiten der afrikanischen Savanne demonstriert die komplexe Sozialstruktur der Elefantenherde ein beeindruckendes Ma√ü an Kommunikation.",
          "Die synchronisierten Flugmuster eines Vogelschwarmes tauchen den Himmel in ein atemberaubendes Farbspektakel."
          // Weitere S√§tze‚Ä¶
        ]
      },
      code_python: {
        easy: [
          "print('Hello, World!')",
          "message = 'Python rocks!'"
        ],
        normal: [
          "def add(x, y): return x + y",
          "def fibonacci(n):\n    a, b = 0, 1\n    for _ in range(n):\n        a, b = b, a + b\n    return a"
        ],
        hard: [
          "def complex_function(x):\n    return [i for i in range(x) if i % 2 == 0]\nprint(complex_function(10))",
          "try:\n    import non_existent_module\nexcept ImportError:\n    print('Modul nicht gefunden!')"
        ]
      }
    };

    // Englische Copy-S√§tze ‚Äì (bei Kategorie "tierwelt" wird zu "animalworld" gewechselt)
    const sentenceLibraries_en = {
      standard: {
        easy: [
          "The dog runs fast.",
          "The sun sets slowly."
        ],
        normal: [
          "A majestic eagle soars high in the azure sky, inspiring everyone who watches it.",
          "The gentle caress of a cool breeze brings the scent of spring directly to your heart."
        ],
        hard: [
          "Amidst a raging storm, a lone hero makes his way through the scattered ruins of an abandoned city as the wind howls relentlessly.",
          "The synchronized flight patterns of a flock of birds, turning the sky into a breathtaking spectacle, demonstrate the collective intelligence and unity of the animal kingdom."
        ]
      },
      animalworld: {
        easy: [
          "The dog barks in the garden.",
          "The antelope jumps gracefully across the open field."
        ],
        normal: [
          "In the African savannah, the giraffe demonstrates impressive adaptability with its long stride and elegant movements.",
          "The synchronized movements of a school of fish illustrate a remarkable collective behavior that transcends the individual."
        ],
        hard: [
          "Across the vast African plains, the complex social structure of an elephant herd showcases an impressive level of communication and unity.",
          "The coordinated flight of a flock of birds, turning the sky into a dazzling spectacle, exemplifies the collective intelligence and cohesion of the animal world."
        ]
      }
    };

    // Swahili Copy-S√§tze ‚Äì (bei Kategorie "tierwelt" wird zu "wanyama" gewechselt)
    const sentenceLibraries_sw = {
      standard: {
        easy: [
          "Mbwa anakimbia haraka.",
          "Jua linazama polepole."
        ],
        normal: [
          "Tai wa heshima wanapaa juu angani ya buluu, wakiwahamasisha watu wote.",
          "Mwanga wa jua unaleta utulivu moyoni mwa watu."
        ],
        hard: [
          "Katikati ya dhoruba kali, shujaa mmoja anapitia mabaki ya mji uliotapakaa wakati upepo unavuma kwa nguvu.",
          "Mifumo ya ndege inayopaa kwa usawa inaonesha umoja wa kweli wa jamii ya wanyama."
        ]
      },
      wanyama: {
        easy: [
          "Mbwa analia bustani.",
          "Paka analia kwa upole."
        ],
        normal: [
          "Katika savanna ya Afrika, twiga inaonyesha uwezo mkubwa wa kustahimili joto na baridi.",
          "Mienendo ya wanyama katika hifadhi inaonesha umoja wa kipekee kati ya viumbe mbalimbali."
        ],
        hard: [
          "Katika maeneo ya mbali ya Afrika, muundo wa kijamii wa wanyama unaonesha kiwango cha juu cha mawasiliano na umoja.",
          "Mwingiliano wa ndege wakati wa kuruka unaonesha ufanisi na umoja wa jamii ya wanyama."
        ]
      }
    };

    let boss = null, bossDefeated = false;
    let lastProcessedIndex = 0;
    let lastHotStreakWordCount = 0;
    
    function calculateSessionScore(words, errorCount, wpm, sessionDuration) {
      let baseScore = words * 10;
      let errorPenalty = errorCount * 5;
      let targetWPM = 40;
      let tempoBonus = (wpm > targetWPM) ? Math.round((wpm - targetWPM) * 2) : 0;
      let timeBonus = sessionDuration < 120 ? 20 : 0;
      let finalScore = baseScore + tempoBonus + timeBonus - errorPenalty;
      return finalScore > 0 ? finalScore : 0;
    }
    
    function getPlayerRank() {
      if (userStats.xp < 500) return "Bronze";
      if (userStats.xp < 1000) return "Silber";
      return "Gold";
    }
    
    function updateProfileUI() {
      const profileImgElem = document.getElementById("profileImage");
      const playerNameElem = document.getElementById("playerName");
      const playerWissenspunkteElem = document.getElementById("playerWissenspunkte");
      profileImgElem.src = userStats.profileImage || "https://via.placeholder.com/80";
      playerNameElem.innerHTML = `${userStats.playerName} <span class="rank-badge">${getPlayerRank()}</span>`;
      playerWissenspunkteElem.textContent = "Wissenspunkte: " + userStats.wissenspunkte;
    }
    
    function showSessionResults(words, wpm, apm, errorCount, sessionScore) {
      let rank = getPlayerRank();
      let bonusWissenspunkte = Math.round(sessionScore / 10);
      let resultHTML = `
        <h2>${currentLanguage === 'de' ? "Session beendet!" : (currentLanguage === 'en' ? "Session Ended!" : "Muda Umekwisha!")}</h2>
        <p>${currentLanguage === 'de' ? "Spieler:" : (currentLanguage === 'en' ? "Player:" : "Mchezaji:")} ${userStats.playerName} ‚Äì ${currentLanguage === 'de' ? "Rang:" : (currentLanguage === 'en' ? "Rank:" : "Cheo:")} ${rank}</p>
        <p>${currentLanguage === 'de' ? "W√∂rter:" : (currentLanguage === 'en' ? "Words:" : "Maneno:")} ${words}</p>
        <p>${currentLanguage === 'de' ? "WPM:" : (currentLanguage === 'en' ? "WPM:" : "Maneno kwa Dakika:")} ${wpm}</p>
        <p>${currentLanguage === 'de' ? "APM:" : (currentLanguage === 'en' ? "APM:" : "Mabofya kwa Dakika:")} ${apm}</p>
        <p>${currentLanguage === 'de' ? "Fehler:" : (currentLanguage === 'en' ? "Errors:" : "Makosa:")} ${errorCount}</p>
        <p>${currentLanguage === 'de' ? "Session Score:" : (currentLanguage === 'en' ? "Session Score:" : "Alama za Muda:")} ${sessionScore}</p>
        <p>${currentLanguage === 'de' ? "Bonus Wissenspunkte:" : (currentLanguage === 'en' ? "Bonus Knowledge Points:" : "Alama za Ziada:")} ${bonusWissenspunkte}</p>
        <button onclick="closeResultsPopup()">${currentLanguage === 'de' ? "Schlie√üen" : (currentLanguage === 'en' ? "Close" : "Funga")}</button>
      `;
      endSessionPopup.innerHTML = resultHTML;
      endSessionPopup.style.display = "block";
    }
    
    function closeResultsPopup() {
      endSessionPopup.style.display = "none";
    }
    
    function rollBonus() {
      return Math.floor(Math.random() * (50 - 3 + 1)) + 3;
    }
    
    function checkHotStreakBonus() {
      const HOT_STREAK_THRESHOLD = 8;
      if (hotStreakCounter >= HOT_STREAK_THRESHOLD) {
        let bonus = rollBonus();
        showDicePopup(bonus);
        hotStreakCounter = 0;
        return bonus;
      }
      return 0;
    }
    
    function showDicePopup(bonus) {
      const dicePopup = document.createElement("div");
      dicePopup.innerHTML = `<div class="dice-animation">${bonus}</div>`;
      dicePopup.style.position = "fixed";
      dicePopup.style.top = "50%";
      dicePopup.style.left = "50%";
      dicePopup.style.transform = "translate(-50%, -50%)";
      dicePopup.style.background = "rgba(0,0,0,0.8)";
      dicePopup.style.color = "#fff";
      dicePopup.style.padding = "20px";
      dicePopup.style.borderRadius = "10px";
      dicePopup.style.fontSize = "2em";
      dicePopup.style.zIndex = "500";
      document.body.appendChild(dicePopup);
      setTimeout(() => {
        dicePopup.classList.add("fade-out");
        setTimeout(() => { document.body.removeChild(dicePopup); }, 1000);
      }, 2000);
    }
    
    function renderShop() {
      const shopProfileSection = document.getElementById("shopProfileSection");
      shopProfileSection.innerHTML = "<h3>Profilbilder</h3>";
      shopProfileItems.forEach(item => {
        const btn = document.createElement("button");
        btn.id = "shop_" + item.id;
        if (userStats.inventory.profileImages && userStats.inventory.profileImages.includes(item.imgUrl)) {
          btn.disabled = true;
          btn.innerHTML = `<img src="${item.imgUrl}" style="width:32px; vertical-align:middle;"> Gekauft`;
        } else {
          btn.innerHTML = `<img src="${item.imgUrl}" style="width:32px; vertical-align:middle;"> ${item.price} Wissenspunkte`;
          btn.onclick = () => purchaseItem(item, "profile");
        }
        shopProfileSection.appendChild(btn);
      });
      const shopGluecksbringerSection = document.getElementById("shopGluecksbringerSection");
      shopGluecksbringerSection.innerHTML = "<h3>Gl√ºcksbringer</h3>";
      shopGluecksbringerItems.forEach(item => {
        const btn = document.createElement("button");
        btn.id = "shop_" + item.id;
        if (userStats.inventory.gluecksbringer && userStats.inventory.gluecksbringer.includes(item.imgUrl)) {
          btn.disabled = true;
          btn.innerHTML = `<img src="${item.imgUrl}" style="width:32px; vertical-align:middle;"> Gekauft`;
        } else {
          btn.innerHTML = `<img src="${item.imgUrl}" style="width:32px; vertical-align:middle;"> ${item.price} Wissenspunkte`;
          btn.onclick = () => purchaseItem(item, "gluecksbringer");
        }
        shopGluecksbringerSection.appendChild(btn);
      });
    }
    
    function purchaseItem(item, type) {
      if (userStats.wissenspunkte >= item.price) {
        userStats.wissenspunkte -= item.price;
        if (type === "profile") {
          userStats.profileImage = item.imgUrl;
          userStats.inventory.profileImages = userStats.inventory.profileImages || [];
          if (!userStats.inventory.profileImages.includes(item.imgUrl)) {
            userStats.inventory.profileImages.push(item.imgUrl);
          }
          unlockReward(`Profilbild ${item.id} freigeschaltet!`);
        } else if (type === "gluecksbringer") {
          document.getElementById("writeArea").style.cursor = "url('" + item.imgUrl + "'), auto";
          userStats.inventory.gluecksbringer = userStats.inventory.gluecksbringer || [];
          if (!userStats.inventory.gluecksbringer.includes(item.imgUrl)) {
            userStats.inventory.gluecksbringer.push(item.imgUrl);
          }
          unlockReward(`Gl√ºcksbringer ${item.id} freigeschaltet!`);
        }
        updateProfileUI();
        renderInventory();
        renderShop();
        alert(`${item.id} wurde erfolgreich gekauft!`);
      } else {
        alert(currentLanguage === 'de' ? "Nicht gen√ºgend Wissenspunkte! Verdiene mehr XP und Wissenspunkte, indem du weiterschreibst." : (currentLanguage === 'en' ? "Not enough Knowledge Points! Earn more XP and points by writing." : "Hatutoshi alama za maarifa! Pata XP zaidi kwa kuandika."));
      }
    }
    
    function renderInventory() {
      const container = document.getElementById("inventoryContainer");
      container.innerHTML = "<h2>Inventar</h2>";
      let profileDiv = document.createElement("div");
      profileDiv.innerHTML = "<h3>Profilbilder</h3>";
      userStats.inventory.profileImages = userStats.inventory.profileImages || [];
      userStats.inventory.profileImages.forEach(imgUrl => {
        let img = document.createElement("img");
        img.src = imgUrl;
        img.style.width = "50px";
        img.style.marginRight = "5px";
        img.style.cursor = "pointer";
        img.title = "Klicke, um dieses Profilbild auszuw√§hlen";
        img.onclick = () => {
          userStats.profileImage = imgUrl;
          updateProfileUI();
          renderInventory();
        };
        profileDiv.appendChild(img);
      });
      container.appendChild(profileDiv);
      let gluecksbringerDiv = document.createElement("div");
      gluecksbringerDiv.innerHTML = "<h3>Gl√ºcksbringer</h3>";
      userStats.inventory.gluecksbringer = userStats.inventory.gluecksbringer || [];
      userStats.inventory.gluecksbringer.forEach(curUrl => {
        let img = document.createElement("img");
        img.src = curUrl;
        img.style.width = "50px";
        img.style.marginRight = "5px";
        img.style.cursor = "pointer";
        img.title = "Klicke, um diesen Gl√ºcksbringer auszuw√§hlen";
        img.onclick = () => {
          document.getElementById("writeArea").style.cursor = "url('" + curUrl + "'), auto";
        };
        gluecksbringerDiv.appendChild(img);
      });
      container.appendChild(gluecksbringerDiv);
    }
    
    function generateProfileChecksum(stats) {
      return generateHash(stats.wissenspunkte.toString() + JSON.stringify(stats.inventory.gluecksbringer) + secretKey);
    }

    function saveProfile() {
      const profileChecksum = generateHash(userStats.wissenspunkte.toString() + secretKey);
      userStats.profileChecksum = generateProfileChecksum(userStats);
      const data = JSON.stringify(userStats, null, 2);
      const blob = new Blob([data], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "profile.json";
      document.body.appendChild(a);
      a.click();
      setTimeout(() => {
        URL.revokeObjectURL(url);
        a.remove();
      }, 100);
    }

    function loadProfile(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const loadedProfile = JSON.parse(e.target.result);
          const expectedChecksum = generateProfileChecksum(loadedProfile);
          if (loadedProfile.profileChecksum !== expectedChecksum) {
            alert("Profilpr√ºfung fehlgeschlagen! M√∂glicher Betrugsversuch!");
            return;
          }
          userStats = loadedProfile;
          updateXPAndLevelDisplay();
          updateProfileUI();
          renderInventory();
          renderShop();
          alert("Profil erfolgreich geladen.");
        } catch (error) {
          alert("Fehler beim Laden des Profils: " + error);
        }
      };
      reader.readAsText(file);
    }

    function updateXPAndLevelDisplay() {
      xpDisplay.textContent = `XP: ${userStats.xp}`;
      levelDisplay.textContent = `Level: ${userStats.level}`;
    }

    function checkLevelUp() {
      const newLevel = Math.floor(userStats.xp / 100) + 1;
      if (newLevel > userStats.level) {
        userStats.level = newLevel;
        alert(currentLanguage === 'de' ? `Level Up! Du bist jetzt Level ${newLevel}.` : (currentLanguage === 'en' ? `Level Up! You are now level ${newLevel}.` : `Kiwango kimepanda! Umefikia kiwango cha ${newLevel}.`));
        userStats.wissenspunkte += 50;
        if (newLevel === 2) { unlockReward("üòÄ Emoji Profil"); }
        if (newLevel === 3) { unlockReward("üòé Cool Emoji"); }
        if (newLevel === 4) { unlockReward("üî• Hot Emoji"); }
        if (newLevel === 5) { unlockReward("üèÜ Champion Emoji"); }
      }
      updateXPAndLevelDisplay();
      updateProfileUI();
    }

    function saveSessionToLeaderboard() {
      const currentWords = countWords(writeArea.innerText);
      const sessionData = { words: currentWords, xp: userStats.xp, timestamp: Date.now() };
      leaderboard.push(sessionData);
      leaderboard.sort((a, b) => b.words - a.words);
      localStorage.setItem("leaderboard", JSON.stringify(leaderboard));
    }

    function updateLeaderboard() {
      const leaderboardBody = document.getElementById("leaderboardBody");
      leaderboardBody.innerHTML = "";
      leaderboard.slice(0, 10).forEach((session, index) => {
        const row = document.createElement("tr");
        row.innerHTML = `<td>${index + 1} ‚≠ê</td><td>${session.words} ‚úçÔ∏è</td><td>${session.xp} üèÜ</td>`;
        leaderboardBody.appendChild(row);
      });
    }

    function shareResults() {
      const summary = `${currentLanguage === 'de' ? "Schreibabenteuer DemusOpalium Ergebnisse:" : (currentLanguage === 'en' ? "Writing Adventure DemusOpalium Results:" : "Matokeo ya Mchezo wa Kuandika DemusOpalium:")}\n${currentLanguage === 'de' ? "W√∂rter:" : (currentLanguage === 'en' ? "Words:" : "Maneno:")} ${countWords(writeArea.innerText)}\n${currentLanguage === 'de' ? "XP:" : (currentLanguage === 'en' ? "XP:" : "XP:")} ${userStats.xp}\n${currentLanguage === 'de' ? "Level:" : (currentLanguage === 'en' ? "Level:" : "Kiwango:")} ${userStats.level}`;
      navigator.clipboard.writeText(summary).then(() => { 
        alert(currentLanguage === 'de' ? "Ergebnisse kopiert!" : (currentLanguage === 'en' ? "Results copied!" : "Matokeo yamekunakili!")); 
      });
    }

    function unlockReward(reward) {
      if (!unlockedRewards.includes(reward)) {
        unlockedRewards.push(reward);
        alert(currentLanguage === 'de' ? "Reward freigeschaltet: " + reward : (currentLanguage === 'en' ? "Reward unlocked: " + reward : "Tuzo limetolewa: " + reward));
        localStorage.setItem("unlockedRewards", JSON.stringify(unlockedRewards));
        updateRewardUI();
      }
    }

    function updateRewardUI() {
      const rewardList = document.getElementById("rewardList");
      rewardList.innerHTML = "";
      unlockedRewards.forEach(r => {
        const li = document.createElement("li");
        li.textContent = r;
        rewardList.appendChild(li);
      });
    }

    /* --- Event Listener --- */
    document.getElementById("changeNameBtn").addEventListener("click", function() {
      const newName = document.getElementById("playerNameInput").value.trim();
      if (newName) {
        userStats.playerName = newName;
        updateProfileUI();
        alert(currentLanguage === 'de' ? "Name wurde ge√§ndert!" : (currentLanguage === 'en' ? "Name changed!" : "Jina limetabadilishwa!"));
      } else {
        alert(currentLanguage === 'de' ? "Bitte gib einen g√ºltigen Namen ein." : (currentLanguage === 'en' ? "Please enter a valid name." : "Tafadhali ingiza jina halali."));
      }
    });

    document.getElementById("saveProfileBtn").addEventListener("click", saveProfile);
    document.getElementById("loadProfileBtn").addEventListener("click", () => { loadProfileInput.click(); });
    document.getElementById("loadProfileInput").addEventListener("change", loadProfile);

    document.getElementById("infoBtn").addEventListener("click", () => { document.getElementById("infoModal").style.display = "flex"; });
    document.getElementById("closeInfo").addEventListener("click", () => { document.getElementById("infoModal").style.display = "none"; });
    window.addEventListener("click", (event) => { 
      const infoModal = document.getElementById("infoModal");
      if (event.target === infoModal) { infoModal.style.display = "none"; }
    });
    document.getElementById("startBtn").addEventListener("click", () => { resetSession(); });
    document.getElementById("resetBtn").addEventListener("click", resetSession);
    document.getElementById("promptBtn").addEventListener("click", showRandomPrompt);
    document.getElementById("shareBtn").addEventListener("click", shareResults);
    document.getElementById("checkBtn").addEventListener("click", checkCopySentence);

    const modeSelect = document.getElementById("modeSelect");
    const timeSelect = document.getElementById("timeSelect");
    const difficultySelect = document.getElementById("difficultySelect");
    const writeArea = document.getElementById("writeArea");
    const timerDisplay = document.getElementById("timer");
    const wordCountDisplay = document.getElementById("wordCount");
    const goalProgressDisplay = document.getElementById("goalProgress");
    const xpDisplay = document.getElementById("xpDisplay");
    const levelDisplay = document.getElementById("levelDisplay");
    const wpmDisplay = document.getElementById("wpmDisplay");
    const apmDisplay = document.getElementById("apmDisplay");
    const hotStreakIndicator = document.getElementById("hotStreakIndicator");
    const achievementPopup = document.getElementById("achievementPopup");
    const copyTargetElem = document.getElementById("copyTarget");
    const targetSentenceElem = document.getElementById("targetSentence");
    const endSessionPopup = document.getElementById("endSessionPopup");
    let leaderboard = JSON.parse(localStorage.getItem("leaderboard")) || [];
    let unlockedRewards = [];
    if (localStorage.getItem("unlockedRewards")) {
      unlockedRewards = JSON.parse(localStorage.getItem("unlockedRewards"));
      updateRewardUI();
    }
    let sessionAchievements = {};
    let copyAchieved = {};
    const prompts = [
      "Es war einmal ein geheimnisvoller Wald, in dem die Zeit stillzustehen schien...",
      "Als die Sonne hinter den Bergen verschwand, begann ein Abenteuer, das alles ver√§ndern sollte...",
      "Pl√∂tzlich ert√∂nte ein seltsames Ger√§usch, und niemand wusste, was als N√§chstes passieren w√ºrde...",
      "In einer Stadt, in der jeder Bewohner ein Geheimnis hatte, wurde ein unscheinbarer Brief gefunden..."
    ];
    const warningSound = new Audio('warning.mp3');
    
    function countWords(text) {
      return text.trim().split(/\s+/).filter(w => w.length > 0).length;
    }
    
    function updateTimerDisplay() {
      let min = Math.floor(remainingTime / 60);
      let sec = remainingTime % 60;
      timerDisplay.textContent = `Time: ${min}:${sec.toString().padStart(2, "0")}`;
    }
    
    function updateWordCount() {
      const text = writeArea.innerText;
      const count = countWords(text);
      wordCountDisplay.textContent = `Words: ${count}`;
      goalProgressDisplay.textContent = `Goal: ${count}/${window.baseTarget || "-"}`;
      if (modeSelect.value === "adventure" && boss) { updateBossStatus(); }
      if (modeSelect.value === "adventure" && boss) {
         if (count - lastHotStreakWordCount >= 8) {
             let bonus = rollBonus();
             boss.currentHealth = Math.max(boss.currentHealth - bonus, 0);
             updateBossUI();
             showDicePopup(bonus);
             lastHotStreakWordCount = count;
         }
      }
      for (let threshold in sessionAchievements) {
        if (count >= threshold && !sessionAchievements[threshold].achieved) {
          sessionAchievements[threshold].achieved = true;
          const achieveElem = document.getElementById("achieve" + threshold);
          if (achieveElem) { achieveElem.textContent = "Erreicht"; }
        }
      }
    }
    
    function updateWPM() {
      if (!sessionStartTime) return;
      const elapsedMinutes = (Date.now() - sessionStartTime) / 60000;
      const wpm = Math.round(countWords(writeArea.innerText) / elapsedMinutes);
      wpmDisplay.textContent = `WPM: ${wpm}`;
    }
    
    function updateAPM() {
      if (!sessionStartTime) return;
      const elapsedMinutes = (Date.now() - sessionStartTime) / 60000;
      const apm = elapsedMinutes > 0 ? Math.round(keyPressCount / elapsedMinutes) : 0;
      apmDisplay.textContent = `APM: ${apm} max`;
    }
    
    function resetIdleTimer() {
      clearTimeout(idleTimeout);
      let idleLimit = (difficultySelect.value === "easy") ? 3000 : (difficultySelect.value === "normal") ? 2000 : 1000;
      idleTimeout = setTimeout(triggerInactivityWarning, idleLimit);
      writeArea.classList.remove("warning");
    }
    
    function triggerInactivityWarning() {
      writeArea.classList.add("warning");
      playWarningSound();
      if (modeSelect.value === "hardcore") {
        setTimeout(() => {
          if (writeArea.classList.contains("warning")) {
            writeArea.innerText = "";
            updateWordCount();
          }
        }, 2000);
      }
    }
    
    function playWarningSound() {
      warningSound.play().catch(e => console.log("Sound konnte nicht abgespielt werden:", e));
    }
    
    function showRandomPrompt() {
      const randomPrompt = prompts[Math.floor(Math.random() * prompts.length)];
      writeArea.innerText = randomPrompt + "\n\n";
      updateWordCount();
    }
    
    function showAchievement(message) {
      achievementPopup.textContent = message;
      achievementPopup.style.display = "block";
      achievementPopup.classList.add("animate__bounceIn");
      setTimeout(() => {
        achievementPopup.classList.remove("animate__bounceIn");
        achievementPopup.style.display = "none";
      }, 3000);
    }
    
    function showHotStreakIndicator() {
      hotStreakIndicator.style.display = "block";
      hotStreakIndicator.classList.add("animate__flash");
      setTimeout(() => {
        hotStreakIndicator.classList.remove("animate__flash");
        hotStreakIndicator.style.display = "none";
      }, 2000);
      hotStreakCounter = 0;
    }
    
    /* --- Copy Challenge Funktionen --- */
    function generateCopySentence() {
      let lib = document.getElementById("librarySelect").value;
      let diff = difficultySelect.value;
      let sentences;
      // Falls Englisch und Kategorie "tierwelt" gew√§hlt, auf "animalworld" umstellen
      if (currentLanguage === 'en' && lib === 'tierwelt') {
        lib = 'animalworld';
      }
      // Falls Swahili und Kategorie "tierwelt" gew√§hlt, auf "wanyama" umstellen
      if (currentLanguage === 'sw' && lib === 'tierwelt') {
        lib = 'wanyama';
      }
      if (currentLanguage === 'de') {
        sentences = sentenceLibraries[lib][diff];
      } else if (currentLanguage === 'en') {
        sentences = sentenceLibraries_en[lib] ? sentenceLibraries_en[lib][diff] : sentenceLibraries[lib][diff];
      } else if (currentLanguage === 'sw') {
        sentences = sentenceLibraries_sw[lib] ? sentenceLibraries_sw[lib][diff] : sentenceLibraries[lib][diff];
      }
      let randomIndex = Math.floor(Math.random() * sentences.length);
      currentTargetSentence = sentences[randomIndex];
      targetSentenceElem.textContent = currentTargetSentence.trim();
      writeArea.innerText = "";
    }
    
    function checkCopySentence() {
      let userInput = writeArea.innerText.replace(/\n/g, " ").trim().toLowerCase();
      let target = currentTargetSentence.trim().toLowerCase();
      if (userInput === target) {
        let points = currentTargetSentence.split(" ").length * 10;
        copyScore += points;
        userStats.xp += points;
        userStats.wissenspunkte += points;
        showAchievement(currentLanguage === 'de' ? "Satz korrekt! +" + points + " Punkte." : (currentLanguage === 'en' ? "Sentence correct! +" + points + " points." : "Sentensi sahihi! +" + points + " pointi."));
        checkCopyAchievements();
        writeArea.innerText = "";
        updateCopyScoreDisplay();
        generateCopySentence();
      } else {
        showAchievement(currentLanguage === 'de' ? "Nicht exakt! Versuche es erneut." : (currentLanguage === 'en' ? "Not exactly! Try again." : "Sio sahihi! Jaribu tena."));
      }
    }
    
    function checkCopyAchievements() {
      if (copyScore >= 100 && !copyAchieved["100"]) {
         copyAchieved["100"] = true;
         showAchievement(currentLanguage === 'de' ? "Copy Challenge Bronze erreicht! (+100 Punkte)" : (currentLanguage === 'en' ? "Copy Challenge Bronze reached! (+100 points)" : "Copy Challenge Bronze imefikia! (+100 pointi)"));
         unlockReward("ü•â Copy-Challenge Bronze");
      }
      if (copyScore >= 200 && !copyAchieved["200"]) {
         copyAchieved["200"] = true;
         showAchievement(currentLanguage === 'de' ? "Copy Challenge Silber erreicht! (+200 Punkte)" : (currentLanguage === 'en' ? "Copy Challenge Silver reached! (+200 points)" : "Copy Challenge Silver imefikia! (+200 pointi)"));
         unlockReward("ü•à Copy-Challenge Silber");
      }
      if (copyScore >= 300 && !copyAchieved["300"]) {
         copyAchieved["300"] = true;
         showAchievement(currentLanguage === 'de' ? "Copy Challenge Gold erreicht! (+300 Punkte)" : (currentLanguage === 'en' ? "Copy Challenge Gold reached! (+300 points)" : "Copy Challenge Gold imefikia! (+300 pointi)"));
         unlockReward("ü•á Copy-Challenge Gold");
      }
    }
    
    function initCopyMode() {
      copyScore = 0;
      copyAchieved = {};
      generateCopySentence();
      copyTargetElem.style.display = "block";
      document.getElementById("checkBtn").style.display = "inline-block";
      document.getElementById("copyScoreDisplay").style.display = "block";
      writeArea.innerText = currentLanguage === 'de' ? "Dr√ºcke Enter, um das Spiel zu starten" : (currentLanguage === 'en' ? "Press Enter to start the game" : "Bonyeza Enter kuanza mchezo");
      waitingForStart = true;
      updateCopyScoreDisplay();
    }
    
    function updateCopyScoreDisplay() {
      document.getElementById("copyScoreDisplay").textContent = "Copy Score: " + copyScore;
    }
    
    function startSession() {
      endSessionPopup.style.display = "none";
      sessionActive = true;
      keyPressCount = 0;
      hotStreakCounter = 0;
      waitingForStart = false;
      let idleLimit = (difficultySelect.value === "easy") ? 3000 : (difficultySelect.value === "normal") ? 2000 : 1000;
      let thresholdTime = (difficultySelect.value === "easy") ? 250 : (difficultySelect.value === "normal") ? 200 : 150;
      hotStreakTimeThreshold = thresholdTime;
      idleTimeout = setTimeout(triggerInactivityWarning, idleLimit);
    
      const timeMode = parseInt(timeSelect.value);
      remainingTime = timeMode * 60;
      if (modeSelect.value !== "copy") {
        window.baseTarget = (difficultySelect.value === "easy") ? timeMode * 65 : (difficultySelect.value === "normal") ? timeMode * 85 : timeMode * 100;
        generateAchievements();
      } else {
        generateCopySentence();
      }
    
      if (modeSelect.value === "adventure") {
        initBoss();
        lastProcessedIndex = 0;
        lastHotStreakWordCount = countWords(writeArea.innerText);
      }
    
      updateTimerDisplay();
      updateWordCount();
      sessionStartTime = Date.now();
    
      timerInterval = setInterval(() => {
        remainingTime--;
        updateTimerDisplay();
        updateWPM();
        updateAPM();
        if (modeSelect.value === "adventure" && boss) { updateBossStatus(); }
        if (remainingTime <= 0) { 
          if (modeSelect.value !== "copy") {
            let words = countWords(writeArea.innerText);
            let wpm = Math.round(words / ((Date.now() - sessionStartTime) / 60000));
            let apm = Math.round(keyPressCount / ((Date.now() - sessionStartTime) / 60000));
            let errorCount = 0;
            let sessionDuration = Math.floor((Date.now() - sessionStartTime) / 1000);
            let sessionScore = calculateSessionScore(words, errorCount, wpm, sessionDuration);
            userStats.wissenspunkte += Math.round(sessionScore / 10);
            updateXPAndLevelDisplay();
            saveSessionToLeaderboard();
            updateLeaderboard();
            updateProfileUI();
            showSessionResults(words, wpm, apm, errorCount, sessionScore);
          }
          endSession();
        }
      }, 1000);
    }
    
    function resetSession() {
      clearInterval(timerInterval);
      clearTimeout(idleTimeout);
      sessionActive = false;
      remainingTime = parseInt(timeSelect.value) * 60;
      writeArea.innerText = currentLanguage === 'de' ? "Dr√ºcke Enter, um das Spiel zu starten" : (currentLanguage === 'en' ? "Press Enter to start the game" : "Bonyeza Enter kuanza mchezo");
      waitingForStart = true;
      updateTimerDisplay();
      updateWordCount();
      writeArea.classList.remove("warning");
      keyPressCount = 0;
      boss = null;
      bossDefeated = false;
      document.getElementById("bossContainer").style.display = "none";
      hotStreakIndicator.style.display = "none";
      copyTargetElem.style.display = "none";
      document.getElementById("checkBtn").style.display = "none";
      document.getElementById("copyScoreDisplay").style.display = "none";
      endSessionPopup.style.display = "none";
      
      if (modeSelect.value === "copy") {
        initCopyMode();
      }
    }
    
    function endSession() {
      clearInterval(timerInterval);
      clearTimeout(idleTimeout);
      sessionActive = false;
      
      if (modeSelect.value !== "copy") {
        // Ergebnis-Popup wird in showSessionResults() angezeigt
      } else {
        let message = currentLanguage === 'de' ? "Deine Copy Challenge Punkte: " + copyScore : (currentLanguage === 'en' ? "Your Copy Challenge score: " + copyScore : "Alama zako za Copy Challenge: " + copyScore);
        endSessionPopup.innerHTML = `<h2>${currentLanguage === 'de' ? "Session beendet!" : (currentLanguage === 'en' ? "Session Ended!" : "Muda umekwisha!")}</h2>
                                     <p>${message}</p>
                                     <button onclick="closeResultsPopup()">${currentLanguage === 'de' ? "Schlie√üen" : (currentLanguage === 'en' ? "Close" : "Funga")}</button>`;
        endSessionPopup.style.display = "block";
      }
      
      const currentWords = countWords(writeArea.innerText);
      for (let threshold in sessionAchievements) {
        if (currentWords >= threshold && !sessionAchievements[threshold].achieved) {
          sessionAchievements[threshold].achieved = true;
          const achieveElem = document.getElementById("achieve" + threshold);
          if (achieveElem) { achieveElem.textContent = "Erreicht"; }
        }
      }
      const sessionDuration = Math.floor((Date.now() - sessionStartTime) / 1000);
      const xpEarned = currentWords + Math.floor(sessionDuration / 10);
      userStats.xp += xpEarned;
      userStats.totalWords += currentWords;
      if (sessionDuration > userStats.longestSession) { userStats.longestSession = sessionDuration; }
      checkLevelUp();
      saveSessionToLeaderboard();
      updateLeaderboard();
      copyTargetElem.style.display = "none";
      document.getElementById("checkBtn").style.display = "none";
      document.getElementById("copyScoreDisplay").style.display = "none";
      updateProfileUI();
    }
    
    function initBoss() {
      boss = { name: "Wort Boss", maxHealth: 500, currentHealth: 500, targetWords: window.baseTarget * 1.5 };
      bossDefeated = false;
      document.getElementById("bossContainer").style.display = "block";
      document.getElementById("bossName").textContent = boss.name;
      updateBossUI();
    }
    
    function updateBossUI() {
      let healthPercent = (boss.currentHealth / boss.maxHealth) * 100;
      document.getElementById("bossHealth").style.width = healthPercent + "%";
    }
    
    function processNewTextForBossDamage() {
      let fullText = writeArea.innerText;
      let newText = fullText.substring(lastProcessedIndex);
      if (newText.trim().length === 0) return 0;
      let damage = 0;
      let sentenceRegex = /[^\.!\?]+[\.!\?]+/g;
      let sentences = newText.match(sentenceRegex);
      if (!sentences) { sentences = [newText]; }
      sentences.forEach(sentence => {
        let sentenceDamage = 0;
        let words = sentence.trim().split(/\s+/);
        words.forEach(word => {
          let cleanedWord = word.replace(/^[^A-Za-z√Ñ√ñ√ú√§√∂√º√ü'-]+|[^A-Za-z√Ñ√ñ√ú√§√∂√º√ü'-]+$/g, '');
          if (cleanedWord.length > 0) { sentenceDamage += cleanedWord.length; }
        });
        damage += sentenceDamage + Math.round(sentenceDamage * 0.2);
      });
      damage += checkHotStreakBonus();
      lastProcessedIndex = fullText.length;
      return damage;
    }
    
    function updateBossStatus() {
      let newDamage = processNewTextForBossDamage();
      if (newDamage > 0) { boss.currentHealth = Math.max(boss.currentHealth - newDamage, 0); }
      updateBossUI();
      if (boss.currentHealth <= 0 && !bossDefeated) { bossDefeated = true; winGame(); }
    }
    
    function winGame() {
      let bonusXP = 50;
      let bonusWissenspunkte = 50;
      showAchievement(currentLanguage === 'de' ? "Boss besiegt! Bonus XP und Wissenspunkte erhalten!" : (currentLanguage === 'en' ? "Boss defeated! Bonus XP and points awarded!" : "Boss imefanywa! Pokea bonus XP na alama!"));
      userStats.xp += bonusXP;
      userStats.wissenspunkte += bonusWissenspunkte;
      unlockReward("üèÜ Boss-Besieger Emoji");
      clearInterval(timerInterval);
      clearTimeout(idleTimeout);
      endSessionPopup.innerHTML = `<h2>${currentLanguage === 'de' ? "Gewonnen! Boss besiegt!" : (currentLanguage === 'en' ? "You Won! Boss Defeated!" : "Umeshinda! Boss imeshindwa!")}</h2>
                                   <p>${currentLanguage === 'de' ? "Bonus XP:" : (currentLanguage === 'en' ? "Bonus XP:" : "Bonus XP:")} ${bonusXP}</p>
                                   <p>${currentLanguage === 'de' ? "Bonus Wissenspunkte:" : (currentLanguage === 'en' ? "Bonus Points:" : "Bonus Alama:")} ${bonusWissenspunkte}</p>
                                   <button onclick="closeResultsPopup()">${currentLanguage === 'de' ? "Schlie√üen" : (currentLanguage === 'en' ? "Close" : "Funga")}</button>`;
      endSessionPopup.style.display = "block";
      updateProfileUI();
    }
    
    function generateAchievements() {
      sessionAchievements = {};
      let threshold = 25;
      while (threshold <= window.baseTarget) {
        sessionAchievements[threshold] = { achieved: false, category: (threshold < 100 ? "Freewrite" : threshold < 200 ? "Copy" : "Allgemein") };
        threshold += 25;
      }
      updateAchievementsTable();
    }
    
    function updateAchievementsTable() {
      const tbody = document.getElementById("achievementBody");
      tbody.innerHTML = "";
      const tier = (difficultySelect.value === "easy") ? "Bronze" : (difficultySelect.value === "normal") ? "Silber" : "Gold";
      const timeMode = parseInt(timeSelect.value);
      const timeLabel = (timeMode === 1) ? "Minute" : "Minuten";
      for (let threshold in sessionAchievements) {
        const ach = sessionAchievements[threshold];
        const row = document.createElement("tr");
        row.setAttribute("data-category", ach.category);
        row.innerHTML = `<td>${timeMode} ${timeLabel}: ${tier} ${threshold}+ W√∂rter</td>
                         <td>Mindestens ${threshold} W√∂rter in ${timeMode} ${timeLabel}</td>
                         <td id="achieve${threshold}">${ach.achieved ? "Erreicht" : "Nicht erreicht"}</td>`;
        tbody.appendChild(row);
      }
    }
    
    writeArea.addEventListener("keydown", (e) => {
      if (!sessionActive && waitingForStart && e.key === "Enter") {
         e.preventDefault();
         waitingForStart = false;
         writeArea.innerText = "";
         startSession();
         return;
      }
      if (!sessionActive) return;
      if (modeSelect.value === "copy" && e.key === "Enter") {
         e.preventDefault();
         checkCopySentence();
         return;
      }
      resetIdleTimer();
      updateWordCount();
      keyPressCount++;
      const currentTime = Date.now();
      if (currentTime - lastKeyTime < hotStreakTimeThreshold) { hotStreakCounter++; }
      else { hotStreakCounter = 1; }
      lastKeyTime = currentTime;
      if (hotStreakCounter >= hotStreakRequired) { showHotStreakIndicator(); }
    });
    
// ... bereits vorhandene Event-Listener und Funktionen

// Event-Listener f√ºr das Theme-Dropdown
document.getElementById("themeSelect").addEventListener("change", function() {
  // Entferne alle Theme-Klassen vom Body
  document.body.className = "";
  // F√ºge die ausgew√§hlte Theme-Klasse hinzu
  document.body.classList.add(this.value);
});

// Event-Listener f√ºr das Schriftart-Dropdown
document.getElementById("fontSelect").addEventListener("change", function() {
  // √Ñndert die Schriftart des Bodys
  document.body.style.fontFamily = this.value;
});

// Initiales Rendern
renderShop();
renderInventory();
updateLeaderboard();
updateProfileUI();

  </script>
</body>
</html>
